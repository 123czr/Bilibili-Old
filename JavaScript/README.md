### 模块说明
本目录下存放的是所有模块文件，脚本主体`main.user.js`只负责定义模块上下文环境、声明模块及提供模块依赖的基础方法，所有功能实现全部转入模块中。  
这意味着从此一般功能性更新一般都不需要修改`main.user.js`代码部分，只需增加版本号、模块等修改元数据部分。

下面是本脚本特有的载入模块方式方法说明：
   1. 本脚本定义了一个专用的载入模块的方法`importModule`用于按需载入其他模块。该方法接收模块名字符串为参数，用于运行声明在`main.user.js`元数据`@resource`标签中的模块。
   2. 该方法可以在模块中使用，按需载入其他模块，使用方法是`BLOD.importModule()`，如果不传入参数，将返回脚本当前已载入模块的集合。

一个模块本质是一个独立正常的js脚本，区别于es6标准的“模块”概念，也不是用户脚本。请像编写一个正常的js文件一样编写模块。当然作为本脚本的模块，肯定需要用到脚本主体提供的数据，使用方法如下：
   1. 脚本主体暴露了一个对象`BLOD`到页面上下文`window`，所有已提供的数据都在该对象上。比如引入模块的方法`importModule`，模块可以直接使用`BLOD.importModule()`。
   2. 这种使用方法是把`BLOD`作为全局变量，浏览器中的全局自然在`window`上。这里强烈建议将`BLOD`先引入模块作用域中再使用，即在模块代码最前面声明`const BLOD = window.BLOD`.
   3. 模块若要提供数据给脚本主体或其他模块，也请挂载到`BLOD`上。比如某模块声明了一个函数`fun1`用来计算md5值，则令`BLOD.fun1 = fun1`即可将函数暴露出去，其他模块可以使用`BLOD.fun1()`的形式使用该函数。

模块可以全局默认载入，也可以按需再用`importModule`方法，但推荐按需载入以减少不必要的资源消耗。如在需要用`BLOD.fun1()`时再使用`importModule`载入声明了函数`fun1`的模块。`importModule`方法具有验重设计，若某模块已载入将忽略，所以大可以在每次使用`BLOD.fun1()`之时都载入一个模块，如果不确定声明了函数`fun1`的模块的话。  
模块本身可能只负责声明函数、对象等数据，具体功能运行还需另外判断运行时机，比如页面载入状态、DOM节点的变化情况，脚本主体定义了几个方法以回调方式运行这些功能。
   - `joinNormal` 方法接收一个回调函数并在重写页面后第一时间调用该回调函数。所有需要尽早运行并且只运行一个的代码请以回调函数的形式传给方法。
      - 如某模块的一个功能`addMsg`是在页面载入的时候弹出一条通知，那么类似的添加回调方法可能是`BLOD.joinNormal(() => addMsg())`。
   - `joinNode` 方法接收一个回调函数并在每次DOM有变化时执行该回调函数，并将`Event`信息作为第一个参数传递给该回调函数。
      - 如某个模块的一个动能`Toast`是在页面插入了一个`class="example"`的div节点时将该节点移除，那么添加回调的方法可能是`BLOD.joinNode((e) => { if(e.target.className=="example") e.target.remove()})`

此外，`xhrhook`模块也提供了添加XMLHttpRequest hook的类似方法`xhrhook`和`jsonphook`，后者用于hook jQuery提供的ajax。具体使用方法参考`xhrhook`模块相关代码，这里不再详细说明。

更新模块时请在`main.user.js`元数据`@resource`标签中添加上该模块此次变动的commit散列值，并增加`@version`的版本号以通知用户检查更新。由于模块分发使用的是`jsdelivr`CDN，所以如果不添加散列值会存在24小时以内的延时，如果要立刻刷新请访问对应模块的`purge`服务器，如`https://purge.jsdelivr.net/gh/MotooriKashin/Bilibili-Old/JavaScript/xhrhook.js`

以上就是本脚本模块系统的大概说明，原则上任何单独的功能都可以拆分进一个模块以便维护。