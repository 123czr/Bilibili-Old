"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}if(!(window.ActiveXObject||"ActiveXObject"in window)){var __getClientLogo=function(){var t,i=JSON.parse(decodeURI(atob("JTVCJTVCJTIyJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLy8lMjIsJTIyJTIyJTVELCU1QiUyMiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCU1QyU1QyU1QyU1QyUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC8vJTIyLCUyMiUyMiU1RCwlNUIlMjIlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlNUMlNUMlNUMlNUMlMjAlMjAlMjAlMjAlMjAlMjAlMjAvLyUyMiwlMjIlMjIlNUQsJTVCJTIyJTIwJTIwJTIwJTIwIyNEREREREREREREREREREREREREREREIyMlMjIsJTIyJTIyJTVELCU1QiUyMiUyMCUyMCUyMCUyMCMjJTIwREREREREREREREREREREREREREQlMjAjIyUyMiwlMjIlMjAlMjAlMjBfX19fX19fXyUyMCUyMCUyMF9fXyUyMCUyMCUyMF9fXyUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMF9fXyUyMCUyMCUyMF9fX19fX19fJTIwJTIwJTIwX19fJTIwJTIwJTIwX19fJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwX19fJTIyJTVELCU1QiUyMiUyMCUyMCUyMCUyMCMjJTIwaGglMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBoaCUyMCMjJTIyLCUyMiUyMCUyMCUyMCU3QyU1QyU1QyUyMCUyMCUyMF9fJTIwJTIwJTVDJTVDJTIwJTdDJTVDJTVDJTIwJTIwJTVDJTVDJTIwJTdDJTVDJTVDJTIwJTIwJTVDJTVDJTIwJTIwJTIwJTIwJTIwJTIwJTdDJTVDJTVDJTIwJTIwJTVDJTVDJTIwJTdDJTVDJTVDJTIwJTIwJTIwX18lMjAlMjAlNUMlNUMlMjAlN0MlNUMlNUMlMjAlMjAlNUMlNUMlMjAlN0MlNUMlNUMlMjAlMjAlNUMlNUMlMjAlMjAlMjAlMjAlMjAlMjAlN0MlNUMlNUMlMjAlMjAlNUMlNUMlMjIlNUQsJTVCJTIyJTIwJTIwJTIwJTIwIyMlMjBoaCUyMCUyMCUyMCUyMC8vJTIwJTIwJTIwJTIwJTVDJTVDJTVDJTVDJTIwJTIwJTIwJTIwaGglMjAjIyUyMiwlMjIlMjAlMjAlMjAlNUMlNUMlMjAlNUMlNUMlMjAlMjAlNUMlNUMlN0MlNUMlNUMlMjAvXyU1QyU1QyUyMCU1QyU1QyUyMCUyMCU1QyU1QyU1QyU1QyUyMCU1QyU1QyUyMCUyMCU1QyU1QyUyMCUyMCUyMCUyMCUyMCU1QyU1QyUyMCU1QyU1QyUyMCUyMCU1QyU1QyU1QyU1QyUyMCU1QyU1QyUyMCUyMCU1QyU1QyU3QyU1QyU1QyUyMC9fJTVDJTVDJTIwJTVDJTVDJTIwJTIwJTVDJTVDJTVDJTVDJTIwJTVDJTVDJTIwJTIwJTVDJTVDJTIwJTIwJTIwJTIwJTIwJTVDJTVDJTIwJTVDJTVDJTIwJTIwJTVDJTVDJTIyJTVELCU1QiUyMiUyMCUyMCUyMCUyMCMjJTIwaGglMjAlMjAlMjAvLyUyMCUyMCUyMCUyMCUyMCUyMCU1QyU1QyU1QyU1QyUyMCUyMCUyMGhoJTIwIyMlMjIsJTIyJTIwJTIwJTIwJTIwJTVDJTVDJTIwJTVDJTVDJTIwJTIwJTIwX18lMjAlMjAlNUMlNUMlNUMlNUMlMjAlNUMlNUMlMjAlMjAlNUMlNUMlNUMlNUMlMjAlNUMlNUMlMjAlMjAlNUMlNUMlMjAlMjAlMjAlMjAlMjAlNUMlNUMlMjAlNUMlNUMlMjAlMjAlNUMlNUMlNUMlNUMlMjAlNUMlNUMlMjAlMjAlMjBfXyUyMCUyMCU1QyU1QyU1QyU1QyUyMCU1QyU1QyUyMCUyMCU1QyU1QyU1QyU1QyUyMCU1QyU1QyUyMCUyMCU1QyU1QyUyMCUyMCUyMCUyMCUyMCU1QyU1QyUyMCU1QyU1QyUyMCUyMCU1QyU1QyUyMiU1RCwlNUIlMjIlMjAlMjAlMjAlMjAjIyUyMGhoJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwaGglMjAjIyUyMiwlMjIlMjAlMjAlMjAlMjAlMjAlNUMlNUMlMjAlNUMlNUMlMjAlMjAlNUMlNUMlN0MlNUMlNUMlMjAlMjAlNUMlNUMlNUMlNUMlMjAlNUMlNUMlMjAlMjAlNUMlNUMlNUMlNUMlMjAlNUMlNUMlMjAlMjAlNUMlNUNfX19fJTIwJTVDJTVDJTIwJTVDJTVDJTIwJTIwJTVDJTVDJTVDJTVDJTIwJTVDJTVDJTIwJTIwJTVDJTVDJTdDJTVDJTVDJTIwJTIwJTVDJTVDJTVDJTVDJTIwJTVDJTVDJTIwJTIwJTVDJTVDJTVDJTVDJTIwJTVDJTVDJTIwJTIwJTVDJTVDX19fXyUyMCU1QyU1QyUyMCU1QyU1QyUyMCUyMCU1QyU1QyUyMiU1RCwlNUIlMjIlMjAlMjAlMjAlMjAjIyUyMGhoJTIwJTIwJTIwJTIwJTIwJTIwd3d3dyUyMCUyMCUyMCUyMCUyMCUyMGhoJTIwIyMlMjIsJTIyJTIwJTIwJTIwJTIwJTIwJTIwJTVDJTVDJTIwJTVDJTVDX19fX19fXyU1QyU1QyU1QyU1QyUyMCU1QyU1Q19fJTVDJTVDJTVDJTVDJTIwJTVDJTVDX19fX19fXyU1QyU1QyU1QyU1QyUyMCU1QyU1Q19fJTVDJTVDJTVDJTVDJTIwJTVDJTVDX19fX19fXyU1QyU1QyU1QyU1QyUyMCU1QyU1Q19fJTVDJTVDJTVDJTVDJTIwJTVDJTVDX19fX19fXyU1QyU1QyU1QyU1QyUyMCU1QyU1Q19fJTVDJTVDJTIyJTVELCU1QiUyMiUyMCUyMCUyMCUyMCMjJTIwaGglMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBoaCUyMCMjJTIyLCUyMiUyMCUyMCUyMCUyMCUyMCUyMCUyMCU1QyU1QyU3Q19fX19fX18lN0MlMjAlNUMlNUMlN0NfXyU3QyUyMCU1QyU1QyU3Q19fX19fX18lN0MlMjAlNUMlNUMlN0NfXyU3QyUyMCU1QyU1QyU3Q19fX19fX18lN0MlMjAlNUMlNUMlN0NfXyU3QyUyMCU1QyU1QyU3Q19fX19fX18lN0MlMjAlNUMlNUMlN0NfXyU3QyUyMiU1RCwlNUIlMjIlMjAlMjAlMjAlMjAjIyUyME1NTU1NTU1NTU1NTU1NTU1NTU1NJTIwIyMlMjIsJTIyJTIyJTVELCU1QiUyMiUyMCUyMCUyMCUyMCMjTU1NTU1NTU1NTU1NTU1NTU1NTU1NTSMjJTIyLCUyMiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMFJlbGVhc2UlMjAyLjYuMS4lMjBQb3dlcmVkJTIwYnklMjBqaW5rZWxhLWNvcmUlMjAyLjUuMy4lMjIlNUQsJTVCJTIyJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTVDJTVDLyUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCU1QyU1Qy8lMjIsJTIyJTIyJTVEJTVE"))),e=["%c"],a=[];i.forEach(function(t){var i=t[0],a=t[1];e.push(i+a)}),a=a.concat(["color:#00a1d6"]),a=[e.join("\n")].concat(a),(t=console).log.apply(t,_toConsumableArray(a))};__getClientLogo()}!function(t){function i(i){for(var a,o,l=i[0],r=i[1],c=i[2],u=0,m=[];u<l.length;u++)o=l[u],n[o]&&m.push(n[o][0]),n[o]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);for(d&&d(i);m.length;)m.shift()();return s.push.apply(s,c||[]),e()}function e(){for(var t,i=0;i<s.length;i++){for(var e=s[i],a=!0,l=1;l<e.length;l++){var r=e[l];0!==n[r]&&(a=!1)}a&&(s.splice(i--,1),t=o(o.s=e[0]))}return t}var a={},n={0:0},s=[];function o(i){if(a[i])return a[i].exports;var e=a[i]={i:i,l:!1,exports:{}};return t[i].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=t,o.c=a,o.d=function(t,i,e){o.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,i){if(1&i&&(t=o(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var a in t)o.d(e,a,function(i){return t[i]}.bind(null,a));return e},o.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(i,"a",i),i},o.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},o.p="//s1.hdslb.com/bfs/static/jinkela/watchlater/";var l=window.webpackJsonp=window.webpackJsonp||[],r=l.push.bind(l);l.push=i,l=l.slice();for(var c=0;c<l.length;c++)i(l[c]);var d=r;s.push([53,1]),e()}([,,,,,,function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},function(t,i,e){},,,,,,function(t,i,e){t.exports=e.p+"asserts/emptylist.png"},,,,,,,,,,,,function(t,i){t.exports={}},function(t,i){t.exports={}},,,,function(t,i,e){t.exports=e(118)},function(t,i,e){},function(t,i,e){},,,,function(t,i,e){t.exports=e.p+"asserts/p1.png"},function(t,i,e){t.exports=e.p+"asserts/p2.png"},function(t,i,e){t.exports=e.p+"asserts/nofind.png"},function(t,i,e){var a=e(6);e.n(a).a},function(t,i,e){var a=e(7);e.n(a).a},function(t,i,e){var a=e(8);e.n(a).a},function(t,i,e){var a=e(9);e.n(a).a},function(t,i,e){var a=e(10);e.n(a).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,i,e){var a=e(11);e.n(a).a},function(t,i,e){var a=e(12);e.n(a).a},function(t,i,e){var a=e(13);e.n(a).a},function(t,i,e){var a=e(14);e.n(a).a},function(t,i,e){var a=e(15);e.n(a).a},function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAQCAMAAAAyEe/dAAAAV1BMVEUAAADs7OwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQ0NDT09MAAADh4eGpqal3d3cAAAAAAAAAAAAAAADh4eEAAAAAAADExMRycnJ9fX0AAADIyMidnZ1Ia/H0AAAAHXRSTlMzrUpGNzpjPUEwm5dbo3RiWFAjB6FsVItoWwCGgRAE+WoAAACgSURBVBjTdZBZEoMgDECREEBBFFFc2vufs0W2Th3eD2FeFghp0S/uKhcm2L92JZQrxBxETGlLPBCoHt6WAoI6ZuUpiFAaW55dAo4UGFbmTcNMA2C7jW/DxrkVVSqIgeky50MSYTUPaIpZ4rTL/OhYN8r6jd3kRLin6xFKV7oCaUl8GVFkbJtkf2+lTlD+W+lXWXdUYch+Fu160uZyS1N/ALlRBebVeMs4AAAAAElFTkSuQmCC"},function(t,i,e){var a=e(16);e.n(a).a},function(t,i,e){var a=e(17);e.n(a).a},function(t,i,e){var a=e(18);e.n(a).a},function(t,i,e){var a=e(19);e.n(a).a},function(t,i,e){var a=e(20);e.n(a).a},function(t,i,e){var a=e(21);e.n(a).a},function(t,i,e){var a=e(22);e.n(a).a},function(t,i,e){var a=e(23);e.n(a).a},function(t,i,e){var a=e(24);e.n(a).a},function(t,i,e){var a=e(25);e.n(a).a},function(t,i,e){var a=e(26);e.n(a).a},function(t,i,e){},function(t,i,e){var a=e(27);e.n(a).a},function(t,i,e){var a=e(28);e.n(a).a},function(t,i,e){var a=e(29);e.n(a).a},function(t,i,e){var a=e(30);e.n(a).a},function(t,i,e){e.r(i);e(54),e(55);var a=e(1),n=e(47),s=e.n(n),o=e(34),l=e(48),r=e.n(l),c=e(49),u=e.n(c),m=function(){return{message:"This is message Write By watchlater App !",poweredBy:"Powered By Jinkela-cli, Jinkela-core, Jinkela, Vikingr, Webssr. Thanks BILIBILI.com"}};a.a.use(o.a);var p=function(){return new o.a.Store({state:m,mutations:r.a,actions:u.a})},f=e(35),h={data:function(){return{inited:!1}}},v=e(0),w=Object(v.a)(h,function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"app-wrap"},[e("router-view",{attrs:{inited:t.inited},on:{onInit:function(i){t.inited=!0}}})],1)},[],!1,null,null,null).exports,b=e(2),g=e.n(b),y={get:function(t){var i=""+document.cookie,e=i.indexOf(t+"=");if(-1==e||""==t)return"";var a=i.indexOf(";",e);return-1==a&&(a=i.length),unescape(i.substring(e+t.length+1,a))},set:function(t,i,e){e=void 0!==e?e:365;var a=new Date;a.setTime(a.getTime()+24*e*60*60*1e3),document.cookie=t+"="+escape(i)+";expires="+a.toGMTString()+"; path=/; domain=.bilibili.com"},delete:function(t){this.set(t,"",-1)}};!window||!window.localStorage||g()(window.localStorage);function C(t,i){if(t){var e=t.getBoundingClientRect(),a=i||0;return e.top<window.innerHeight+a&&e.bottom>=0}}function _(t,i,e){var a,n=null;return function(){var s=this,o=arguments,l=+new Date;clearTimeout(n),a||(a=l),l-a>=e?(t.apply(s,o),a=l):n=setTimeout(function(){t.apply(s,o)},i)}}var T=function(t,i){if(parseInt(t)<0||null==t||null==t)return"--";if(-1!=String(t).indexOf(".")||-1!=String(t).indexOf("-"))return t;if(0===parseInt(t))return 0;var e=i?"萬":"万",a=i?"億":"亿";return(t=parseInt(t))>=1e4&&t<1e8?(t/1e4).toFixed(1)+e:t>=1e8?(t/1e8).toFixed(1)+a:t};function M(t){return t<10?"0"+t:t}var U=function(t){return-1!=String(t).indexOf(":")?t:t<60?(n=t<10?"0".concat(t):t,"00:".concat(n)):t<3600?(a=t%60,e=parseInt(t/60),n=a<10?"0".concat(a):a,s=e<10?"0".concat(e):e,"".concat(s,":").concat(n)):(a=t%60,e=parseInt(t%3600/60),i=parseInt(t/3600),n=a<10?"0".concat(a):a,s=e<10?"0".concat(e):e,"".concat(i,":").concat(s,":").concat(n));var i,e,a,n,s},I=function(t){return t?t.replace(/^http:/,""):""},k=function(){if("undefined"==typeof window)return!1;try{return 0==document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch(t){return!1}}(),x=function(t,i,e){if(!t)return t;var a=t.match(/(.*\.(jpg|jpeg|gif|png|bmp))(\?.*)?/),n=-1!=t.indexOf("/bfs/");if(!a||"gif"===a[2]||"bmp"===a[2]||!n)return t;var s=i&&e?"@"+i+"w_"+e+"h":"@",o=a[3]?a[3]:"";return k?a[1]+s+".webp"+o:a[1]+s+"."+a[2]+o};var j=function(){var t=1;return"undefined"==typeof window?t:(void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?t=window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio&&(t=window.devicePixelRatio),t)},D=function(){return window.console&&"function"==typeof window.console.log?function(t,i){window.console.log("["+t+"] "+i)}:function(){}},A=function(t,i){if(window.spmReportData){var e=i||t;window.spmReportData[t]=e}},J=function(){try{return y.get("bili_jct")||""}catch(t){return""}}(),L=function(){return!!y.get("DedeUserID")};var S=$.ajax;$.ajax=function(t,i){return"object"==g()(t)&&(i=t,t=void 0),"post"!=i.type&&"POST"!=i.type||!i.data||i.data.csrf||$.extend(i.data,{csrf:y.get("bili_jct")}),S(t,i)};var N={props:{src:{},width:{},height:{},alt:{},webp:{default:!0},hd:{default:!0}},computed:{ratio:function(){return this.hd?j():1},source:function(){return this.webp?I(x(this.src,Math.ceil(this.width*this.ratio),Math.ceil(this.height*this.ratio))):I(this.src)}}},E=(e(62),Object(v.a)(N,function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"lazy-img"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:this.source,expression:"source"}],attrs:{alt:this.alt||"",src:""}})])},[],!1,null,null,null).exports),P={},V={};function O(t){return $.ajax(t)}function F(t,i){var e,a=$.Deferred(),n=(t.type||"")+t.url+JSON.stringify(t.data),s=Math.random().toString().substr(2);return t.jsonpCallback=t.jsonpCallback||"jqueryCallback_bili_".concat(s),i&&V[n]?a.resolve(V[n]):P[n]?P[n]:(e=O(t),P[n]=e,e.done(function(t){delete P[n],i?0===t.code&&(V[n]=t):delete V[n],a.resolve(t)}),e.fail(function(i){"jsonp"!==t.dataType&&"JSONP"!==t.dataType||(window[t.jsonpCallback]=function(){}),t.fallBackUrl?(t.dataType="json",t.url=t.fallBackUrl,O(t).done(function(t){a.resolve(t)}).fail(function(t){a.reject(t)})):a.reject(i),delete P[n]}),a)}var Q={props:{abnormalState:String,abnormalData:{}},data:function(){return{add_wl_text:"添加进稍后再看并播放"}},components:{BiliImg:E},computed:{av:function(){return this.$route.params.aid&&this.$route.params.aid.replace("av","")||""},bv:function(){return this.$route.params.aid},p:function(){return this.$route.params.cid&&this.$route.params.cid.replace("p","")||""},link:function(){return this.$isbv?"//www.bilibili.com/video/"+this.bv:"//www.bilibili.com/video/av"+this.av}},methods:{reload:function(){window.location.reload()},addWatchLater:function(t){var i=this;i.add_wl_text="正在添加...",F({url:"//api.bilibili.com/x/v2/history/toview/add",type:"POST",data:{aid:t,jsonp:"jsonp",csrf:y.get("bili_jct")},dataType:"json",xhrFields:{withCredentials:!0}}).done(function(t){0===t.code?(i.add_wl_text="添加成功",window.location.reload()):i.add_wl_text=t.message}).fail(function(){i.add_wl_text="添加失败，请重试"}),i.rec("watchlater_notinlist_addlist")},goVideoPage:function(){this.rec("watchlater_notinlist_gotoplay"),window.location.href=this.link}}},B=(e(63),Object(v.a)(Q,function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"abnormal-module"},[a("header",[t._v("\n    稍后再看\n  ")]),"loading"===t.abnormalState?a("div",{staticClass:"abnormal-item"},[t._m(0)]):t._e(),"browser"===t.abnormalState?a("div",{staticClass:"abnormal-item"},[a("img",{staticClass:"pic",attrs:{src:e(59)}}),t._m(1)]):t._e(),"fail"===t.abnormalState?a("div",{staticClass:"abnormal-item"},[a("img",{staticClass:"pic",attrs:{src:e(60)}}),a("div",{staticClass:"txt"},[a("p",[t._v("稍后再看列表加载失败，请大侠"),a("a",{on:{click:function(i){return t.reload()}}},[t._v("刷新重试")]),t._v("！")])])]):t._e(),"empty"===t.abnormalState?a("div",{staticClass:"abnormal-item"},[a("img",{staticClass:"pic",attrs:{src:e(36)}}),t._m(2)]):t._e(),"notfind"===t.abnormalState?a("div",{staticClass:"abnormal-item"},[t.abnormalData&&t.abnormalData.aid?a("div",{staticClass:"nofind"},[a("div",{staticClass:"v-box clearfix"},[a("bili-img",{staticClass:"pic",attrs:{src:t.abnormalData.pic,width:144,height:90}}),a("div",{staticClass:"info"},[a("p",{staticClass:"text"},[t._v(t._s(t.abnormalData.title))]),a("p",[a("span",{staticClass:"vi"},[a("i",{staticClass:"view icon"}),t._v(t._s(t._f("formatNum")(t.abnormalData.stat.view)))]),a("span",[a("i",{staticClass:"date icon"}),t._v(t._s(t._f("formatDate")(1e3*t.abnormalData.pubdate)))])]),a("p",[a("span",[a("i",{staticClass:"name icon"}),t._v(t._s(t.abnormalData.owner.name))])])])],1),t._m(3),a("div",{staticClass:"b-box clearfix"},[a("a",{staticClass:"btn-back fl",attrs:{href:"javascript:;"},on:{click:function(i){return t.addWatchLater(t.abnormalData.aid)}}},[t._v(t._s(t.add_wl_text))]),a("a",{staticClass:"btn-back right fr",on:{click:t.goVideoPage}},[t._v("前往它的播放页")])])]):a("div",{staticClass:"nofind"},[a("img",{staticClass:"pic",attrs:{src:e(61)}}),t._m(4),a("div",{staticClass:"b-box clearfix"},[a("a",{staticClass:"btn-back fl",attrs:{href:"#/list"}},[t._v("进入稍后再看列表")]),a("a",{staticClass:"btn-back right fr",attrs:{href:t.link}},[t._v("尝试访问")])])])]):t._e(),"403"===t.abnormalState?a("div",{staticClass:"abnormal-item"},[a("bili-img",{staticClass:"img403",attrs:{src:t.abnormalData.pic,width:232,height:145}}),a("p",{staticClass:"title403"},[t._v(t._s(t.abnormalData.title))]),t._m(5),a("a",{staticClass:"btn-back",attrs:{href:"#/list"}},[t._v("返回稍后再看列表")])],1):t._e(),"404"===t.abnormalState?a("div",{staticClass:"abnormal-item"},[a("bili-img",{staticClass:"img403",attrs:{src:t.abnormalData.pic,width:232,height:145}}),a("p",{staticClass:"title403"},[t._v(t._s(t.abnormalData.title))]),t._m(6),a("a",{staticClass:"btn-back",attrs:{href:"#/list"}},[t._v("返回稍后再看列表")])],1):t._e()])},[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"txt"},[i("p",[this._v("页面加载中...")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"txt"},[i("p",[this._v("您当前使用的浏览器版本过低，不支持打开稍后再看的播放页哦~")]),i("p",[this._v("建议您使用高级浏览器打开如(Chrome)，或升级当前浏览器到最新版本")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"txt"},[i("p",[this._v("稍后再看列表还是空的哦，你可以通过以上方式添加~")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"txt"},[i("p",[this._v("指定的视频并不在你的稍后再看列表中，你可以：")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"txt"},[i("p",[this._v("似乎无法访问呢，你可以：")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"txt"},[i("p",[this._v("因版权原因以上视频在你所在地区无法播放")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"txt"},[i("p",[this._v("啊叻？视频不见了？")])])}],!1,null,null,null).exports);function R(t){var i=$(t.el),e=t.el?i.offset().left+i.width()/2:$(window).width()/2,a=t.el?i.offset().top:$(window).height()/2+$(window).scrollTop(),n=t.msg||"",s=t.cd||2e3,o=t.type||"success";$(".bili-msg").length>0&&$(".bili-msg").remove();var l=$('<div class="bili-msg"></div>');l.appendTo("body"),l.text(n).css({left:e-l.outerWidth()/2,top:a-(l.outerHeight()+10)}),l.append('<iframe frameborder="0" class="layout"></iframe>'),l.addClass("show"),"error"===o&&l.addClass("error"),l[0].timer=setTimeout(function(){l.fadeOut(600,function(){l.remove()})},s)}var X=function(t,i){F({url:"//api.bilibili.com/x/relation/modify",type:"POST",data:{fid:t.fid,act:t.act,re_src:t.re_src,cross_domain:!0,csrf:J},xhrFields:{withCredentials:!0}}).done(function(t){t&&i(t)})},q=new a.a,H={components:{BiliImg:E},props:{upData:{type:Object},liveStatus:{type:Object},isElec:{type:Boolean},follow:{type:Boolean}},data:function(){return{requesting:!1,following:{is:!1,type:0}}},computed:{pendantImage:function(){return!!(this.upData&&this.upData.pendant&&this.upData.pendant.image)},liveTip:function(){return 1===this.liveStatus.status?"直播中":2===this.liveStatus.status?"轮播中":void 0},verify:function(){return this.upData&&this.upData.official_verify&&this.upData.official_verify.type}},watch:{upData:function(t){t.mid&&this.getRelation()}},methods:{getRelation:function(){var t=this;F({url:"//api.bilibili.com/x/relation",type:"GET",data:{fid:t.upData.mid,jsonp:"jsonp"},dataType:"jsonp"}).done(function(i){i&&0===i.code&&(1===i.data.attribute||2===i.data.attribute||6===i.data.attribute?(t.following.is=!0,t.$emit("followed",!0),t.following.type=i.data.attribute):(t.$emit("followed",!1),t.following.is=!1))}).fail(function(t){})},followClick:function(t){var i=this;i.requesting||(L()?i.following.is?(i.requesting=!0,X({fid:this.upData.mid,act:1===i.following.type?4:2,re_src:14},function(e){i.requesting=!1,0===e.code?(i.following.is=!1,i.$emit("followed",!1)):t&&R({el:t.target,msg:e.message,cd:1e3,type:"error"})})):(i.requesting=!0,X({fid:this.upData.mid,act:1,re_src:14},function(e){i.requesting=!1,0===e.code?(i.$emit("followed",!0),i.following.is=!0,i.following.type=2,$.getScript("//static.hdslb.com/common/js/followGroupDialog.js",function(){followGroupDialog(i.upData.mid,i.upData.name,{showErrMsgInDialog:!1,onAddTagError:function(t){R({el:$(".follow-dialog-window .submit"),msg:t||"添加分组失败",cd:1e3,type:"error"})},onSubmitError:function(t){R({el:$(".follow-dialog-window .submit-move"),msg:t||"移动分组失败",cd:1e3,type:"error"})},onSubmitSuccess:function(){R({el:$(".follow-dialog-window"),msg:"加入分组成功",cd:1e3})},onEmptyTagSubmit:function(){R({el:$(".follow-dialog-window"),msg:"加入分组成功",cd:1e3})}})})):t&&R({el:t.target,msg:e.message,cd:1e3,type:"error"})})):location.href="//passport.bilibili.com/login")},charge:function(){window.elecHelper&&window.elecHelper.showModal()}}},z=(e(64),Object(v.a)(H,function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"up-info-module clearfix"},[e("div",{staticClass:"u-face fl"},[t.liveStatus.status?e("a",{staticClass:"live-online",attrs:{href:t.liveStatus.url,target:"_blank"}},[e("span",[t._v(t._s(t.liveTip))])]):t._e(),e("a",{staticClass:"a",attrs:{href:"//space.bilibili.com/"+t.upData.mid,target:"_blank","data-usercard-mid":t.upData.mid}},[e("bili-img",{attrs:{src:t.upData.face,width:68,height:68}}),t.pendantImage?e("bili-img",{staticClass:"pendant",attrs:{src:t.upData.pendant.image,width:112,height:112}}):t._e(),0===t.verify?e("i",{staticClass:"auth p-auth",attrs:{title:"个人认证"}}):t._e(),1===t.verify?e("i",{staticClass:"auth o-auth",attrs:{title:"企业/团体认证"}}):t._e()],1)]),e("div",{staticClass:"info"},[e("div",{staticClass:"user clearfix"},[e("a",{staticClass:"name",attrs:{href:"//space.bilibili.com/"+t.upData.mid,target:"_blank","data-usercard-mid":t.upData.mid}},[t._v(t._s(t.upData.name))]),e("a",{staticClass:"message icon",attrs:{href:"//message.bilibili.com/#whisper/mid"+t.upData.mid,target:"_blank"}},[t._v("发消息")])]),e("div",{staticClass:"sign"},[t._v(t._s(t.upData.sign))]),e("div",{staticClass:"number clearfix"},[e("span",[t._v("投稿："+t._s(t._f("formatNum")(t.upData.archiveCount)))]),e("span",[t._v("粉丝："+t._s(t._f("formatNum")(t.upData.fans)))])]),e("div",{class:"btn "+(t.following.is?"followed":"followe")},[e("a",{staticClass:"b-btn b-gz",on:{click:function(i){return t.followClick(i)}}},[e("span",{staticClass:"gz"},[t._v("+ 关注")]),e("span",{staticClass:"ygz"},[t._v("已关注")]),e("span",{staticClass:"qxgz"},[t._v("取消关注")])]),t.isElec?e("a",{staticClass:"b-btn b-cd",on:{click:function(i){return t.charge()}}},[e("span",{staticClass:"cd"},[t._v("充电")]),e("span",{staticClass:"wtcd"},[t._v("为TA充电")])]):t._e()])])])},[],!1,null,null,null).exports),G={methods:{coinShow:function(t){this.coinable?q.$emit("openCoin"):R({el:t.target,msg:"对本稿件的投币个数已用完",cd:1e3})},favShow:function(){q.$emit("openFav")},showAppeal:function(){this.$emit("showAppeal")}},props:{videoData:{type:Object},coined:{type:Boolean},coinNum:{},breadcrumb:{},coinable:{type:Boolean},collected:{type:Boolean}},computed:{view:function(){return this.videoData.stat&&this.videoData.stat.view},danmaku:function(){return this.videoData.stat&&this.videoData.stat.danmaku},coin:function(){return this.videoData.stat&&this.videoData.stat.coin},coinNums:function(){var t=this.videoData.stat&&this.videoData.stat.coin;return t||0===t?t+this.coinNum:null},favorite:function(){var t=this.videoData.stat&&this.videoData.stat.favorite;return this.collected&&t++,t},breadCrumbFirstName:function(){return this.breadcrumb.name},breadCrumbFirstLink:function(){return{13:"//www.bilibili.com/anime/",167:"//www.bilibili.com/guochuang/",23:"//www.bilibili.com/movie/",177:"//www.bilibili.com/documentary/"}[this.breadcrumb.tid]||"//www.bilibili.com/v/".concat(this.breadcrumb.route,"/")},breadCrumbSecondName:function(){return this.breadcrumb.subName},breadCrumbSecondLink:function(){return"//www.bilibili.com/v/".concat(this.breadcrumb.route,"/").concat(this.breadcrumb.subRoute,"/")}}},W=(e(65),{components:{UpInfo:z,VideoInfo:Object(v.a)(G,function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"video-info-module"},[e("h1",[t._v(t._s(t.videoData.title||"视频信息正在加载..."))]),e("div",{staticClass:"tm-info tminfo"},[t._m(0),t.breadCrumbFirstName?e("span",{staticClass:"crumb"},[e("a",{attrs:{href:t.breadCrumbFirstLink}},[t._v(t._s(t.breadCrumbFirstName))]),t._v(" >")]):t._e(),t.breadCrumbSecondName?e("span",{staticClass:"crumb"},[e("a",{attrs:{href:t.breadCrumbSecondLink}},[t._v(t._s(t.breadCrumbSecondName))])]):t._e(),e("time",[t._v(t._s(t._f("formatDateTime")(1e3*t.videoData.pubdate)))]),e("a",{staticClass:"btn-appeal",on:{click:function(i){return t.showAppeal()}}},[t._v("稿件投诉")])]),e("div",{staticClass:"number"},[e("span",{staticClass:"v play",attrs:{title:-1!=t.view?"总播放数"+t.view:"总播放数"}},[t._v(t._s(t._f("formatNum")(t.view)))]),e("span",{staticClass:"v dm",attrs:{title:"总弹幕数"+t.danmaku}},[t._v(t._s(t._f("formatNum")(t.danmaku)))]),e("span",{staticClass:"line"}),e("span",{directives:[{name:"mouse-movieclip",rawName:"v-mouse-movieclip",value:{step:60,max:19,point:0,speed:60,target:"i"},expression:"{step:60,max:19,point:0,speed:60,target:'i'}"}],staticClass:"u coin",class:{on:t.coined},attrs:{title:t.coinNums>=0?"投币个数"+t.coinNums:"投币个数"},on:{click:t.coinShow}},[e("i"),t._v("硬币 "+t._s(t._f("formatNum")(t.coinNums)))]),e("span",{directives:[{name:"mouse-movieclip",rawName:"v-mouse-movieclip",value:{step:60,max:21,point:0,speed:60,target:"i"},expression:"{step:60,max:21,point:0,speed:60,target:'i'}"}],staticClass:"u fav",class:{on:t.collected},attrs:{title:t.favorite>=0?"收藏人数"+t.favorite:"收藏人数"},on:{click:t.favShow}},[e("i"),t._v(t._s(t.collected?"已收藏":"收藏")+" "+t._s(t._f("formatNum")(t.favorite)))])])])},[function(){var t=this.$createElement,i=this._self._c||t;return i("span",{staticClass:"crumb"},[i("a",{attrs:{href:"/"}},[this._v("主页")]),this._v(" >")])}],!1,null,null,null).exports},props:{upData:{type:Object},videoData:{type:Object},liveStatus:{type:Object},following:{type:Boolean},isElec:{type:Boolean},coined:{type:Boolean},coinNum:{},coinable:{type:Boolean},collected:{type:Boolean},breadcrumb:{type:Object}}}),Y=(e(66),Object(v.a)(W,function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"video-top-info clearfix bili-wrapper"},[e("video-info",{attrs:{videoData:t.videoData,coined:t.coined,coinNum:t.coinNum,coinable:t.coinable,collected:t.collected,following:t.following,breadcrumb:t.breadcrumb},on:{showAppeal:function(i){return t.$emit("showAppeal")}}}),e("up-info",{attrs:{upData:t.upData,liveStatus:t.liveStatus,follow:t.following,isElec:t.isElec}})],1)},[],!1,null,null,null).exports),Z=(e(67),e(50)),K={components:{Qrcode:e.n(Z).a},data:function(){return{mark:!0,qr1:null,qr2:null}},props:{aid:{},tbData:{},elec:{},coined:{type:Boolean},coinNum:0,coinable:{type:Boolean},collected:{type:Boolean}},computed:{avLink:function(){return"https://www.bilibili.com/video/av"+this.aid},flashLink:function(){return"https://static.hdslb.com/miniloader.swf?aid="+this.aid},htmlLink:function(){return'<embed height="415" width="544" quality="high" allowfullscreen="true" type="application/x-shockwave-flash" src="//static.hdslb.com/miniloader.swf" flashvars="aid='+this.aid+'"></embed>'},favNum:function(){var t=this.tbData&&this.tbData.fav;return this.collected&&t++,t},coinNums:function(){return(this.tbData&&this.tbData.coin)+this.coinNum}},methods:{copyLink:function(t,i){var e=$("#"+i)[0];return e.focus(),e.setSelectionRange(0,e.value.length),document.execCommand("copy",!0),R({el:t.target,msg:"已成功复制到剪贴板",cd:1e3}),!1},coinShow:function(t){this.coinable?q.$emit("openCoin"):R({el:t.target,msg:"对本稿件的投币个数已用完",cd:1e3})},favShow:function(){q.$emit("openFav")}}},tt=(e(96),Object(v.a)(K,function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"video-toolbar-module"},[e("div",{staticClass:"share-box"},[e("div",{staticClass:"s-text"},[e("span",{staticClass:"t"},[t._v("分享")]),e("span",{staticClass:"num"},[t._v(t._s(t._f("formatNum")(t.tbData.share)))]),e("i",{staticClass:"icon"})]),t._m(0),e("div",{staticClass:"share-popup"},[e("div",{staticClass:"share-address"},[e("p",{staticClass:"t"},[t._v("将视频贴到博客或论坛")]),e("ul",[e("li",[e("span",{staticClass:"name"},[t._v("视频地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.avLink,expression:"avLink"}],attrs:{id:"link0",type:"text",name:""},domProps:{value:t.avLink},on:{input:function(i){i.target.composing||(t.avLink=i.target.value)}}}),e("span",{staticClass:"btn",on:{click:function(i){return t.copyLink(i,"link0")}}},[t._v("复制")])]),e("li",[e("span",{staticClass:"name"},[t._v("Flash地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.flashLink,expression:"flashLink"}],attrs:{id:"link1",type:"text",name:""},domProps:{value:t.flashLink},on:{input:function(i){i.target.composing||(t.flashLink=i.target.value)}}}),e("span",{staticClass:"btn",on:{click:function(i){return t.copyLink(i,"link1")}}},[t._v("复制")])]),e("li",[e("span",{staticClass:"name"},[t._v("Html地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.htmlLink,expression:"htmlLink"}],attrs:{id:"link2",type:"text",name:""},domProps:{value:t.htmlLink},on:{input:function(i){i.target.composing||(t.htmlLink=i.target.value)}}}),e("span",{staticClass:"btn",on:{click:function(i){return t.copyLink(i,"link2")}}},[t._v("复制")])])])]),e("div",{staticClass:"or-code"},[e("p",{staticClass:"t"},[t._v("微信扫一扫分享")]),e("div",{staticClass:"or-code-pic"},[e("Qrcode",{attrs:{text:t.avLink,width:100,height:100}})],1)])])]),e("div",{staticClass:"tb-line"}),e("div",{staticClass:"fav-box",attrs:{title:"收藏"},on:{click:t.favShow}},[e("div",{directives:[{name:"mouse-movieclip",rawName:"v-mouse-movieclip",value:{step:80,max:14,point:0,speed:100,target:".f-icon-move"},expression:"{step:80,max:14,point:0,speed:100,target:'.f-icon-move'}"}],staticClass:"btn-item"},[e("i",{staticClass:"icon-move f-icon-moved",style:{display:t.collected?"inline-block":"none"}}),e("b",{staticClass:"icon-move f-icon-move",style:{display:t.collected?"none":"inline-block"}}),e("span",{staticClass:"t"},[t._v(t._s(t.collected?"已收藏":"收藏"))]),e("span",{staticClass:"num"},[t._v(t._s(t._f("formatNum")(t.favNum)))])])]),e("div",{staticClass:"coin-box",attrs:{title:"投币"},on:{click:t.coinShow}},[e("div",{directives:[{name:"mouse-movieclip",rawName:"v-mouse-movieclip",value:{step:80,max:8,point:0,speed:100,target:".c-icon-move"},expression:"{step:80,max:8,point:0,speed:100,target:'.c-icon-move'}"}],staticClass:"btn-item"},[t.coined?e("i",{staticClass:"icon-move c-icon-moved"}):e("b",{staticClass:"icon-move c-icon-move"}),e("span",{staticClass:"t"},[t._v(t._s(t.coined?"已投币":"硬币"))]),e("span",{staticClass:"num"},[t._v(t._s(t._f("formatNum")(t.coinNums)))])])]),t._m(1),e("div",{staticClass:"app-box"},[e("div",{directives:[{name:"mouse-movieclip",rawName:"v-mouse-movieclip",value:{step:80,max:16,point:10,target:".icon-move"},expression:"{step:80,max:16,point:10,target:'.icon-move'}"}],staticClass:"btn-item"},[e("i",{staticClass:"icon-move"}),e("span",{staticClass:"t"},[t._v("手机看")]),e("span",{staticClass:"num"},[t._v("缓存更方便")])]),e("div",{staticClass:"qr-code-box"},[e("div",{staticClass:"box clearfix"},[e("div",{ref:"qrcode2",staticClass:"qr-img"},[e("Qrcode",{attrs:{text:t.avLink,width:100,height:100}})],1),e("div",{staticClass:"qr-info"},[t._v(t._s(t.tbData.title))])]),t._m(2)])]),t.elec?e("div",{staticClass:"tb-line"}):t._e()])},[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"share-btn"},[i("ul",{staticClass:"clearfix"},[i("li",{staticClass:"share-icon weibo bili-share",attrs:{"data-share-id":"weibo",title:"分享到新浪微博"}},[this._v("weibo")]),i("li",{staticClass:"share-icon zone bili-share",attrs:{"data-share-id":"qzone",title:"分享到QQ空间"}},[this._v("zone")]),i("li",{staticClass:"share-icon qq bili-share",attrs:{"data-share-id":"qq",title:"分享到QQ"}},[this._v("qq")]),i("li",{staticClass:"share-icon baidu bili-share",attrs:{"data-share-id":"tieba",title:"分享到百度贴吧"}},[this._v("baidu")])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"see-later-box",attrs:{title:"加稍后看"}},[i("div",{staticClass:"btn-item"},[i("i",{staticClass:"icon-move s-icon-moved"}),i("span",{staticClass:"t"},[this._v("已加稍后看")]),i("span",{staticClass:"num"},[this._v("马克一下~")])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("p",{staticClass:"txt"},[this._v("用"),i("a",{attrs:{href:"#",target:"_blank"}},[this._v("哔哩哔哩客户端")]),this._v("或其他应用扫描二维码")])}],!1,null,null,null).exports),it=(e(97),{components:{VideoToolbar:tt,VideoPlayer:Object(v.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"video-player"},[i("div",{attrs:{id:"bofqi"}}),i("div",{staticClass:"danmaku-box",attrs:{id:"danmukuBox"}},[i("div",{staticClass:"danmaku-wrap"})])])}],!1,null,null,null).exports},props:{aid:{},tbData:{},elec:{},coined:{type:Boolean},coinNum:{},coinable:{type:Boolean},collected:{type:Boolean}}}),et=(e(98),Object(v.a)(it,function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"video-box-module"},[i("div",{staticClass:"bili-wrapper"},[i("video-player",{staticClass:"bili-wrapper"}),i("video-toolbar",{attrs:{aid:this.aid,tbData:this.tbData,elec:this.elec,coined:this.coined,coinNum:this.coinNum,coinable:this.coinable,collected:this.collected}})],1)])},[],!1,null,null,null).exports),at={},nt=(e(99),Object(v.a)(at,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"video-tag video-tag-box s_tag"},[this._v("tags")])},[],!1,null,null,null).exports),st={props:{desc:{default:""},reprint:{}},data:function(){return{isOpen:!1,isView:!1,sh:0,ch:null}},computed:{descContent:function(){return"string"==typeof this.desc?function(t){return t.replace(/av([0-9]+)/g,'<a target="_blank" href="//www.bilibili.com/video/av$1">av$1</a>')}(this.desc.replace(/sm([0-9]+)/g,'<a target="_blank" href="http://acg.tv/sm$1">sm$1</a>')):""}},updated:function(){var t=this;this.$nextTick(function(){var i=$(".video-desc .info").height();i>120&&(t.sh=i,t.isView=!0,t.ch=120)})},methods:{onOpen:function(){this.isOpen=!this.isOpen,this.isOpen?$(".video-desc .info").css({height:this.sh}):$(".video-desc .info").css({height:this.ch})}}},ot=(e(100),Object(v.a)(st,function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"video-desc"},[t.reprint?e("div",{staticClass:"reprint"},[e("i",{staticClass:"icon"}),t._v("未经作者授权 禁止转载\n  ")]):t._e(),e("div",{staticClass:"info",style:"height:"+t.ch+"px",domProps:{textContent:t._s(t.descContent)}}),t.isView?e("div",{staticClass:"btn",on:{click:t.onOpen}},[t.isOpen?e("span",[t._v("收起")]):e("span",[t._v("展开")])]):t._e()])},[],!1,null,null,null).exports),lt=new a.a,rt={API:"//api.bilibili.com",WWW:"//www.bilibili.com",SEARCH:"//s.search.bilibili.com",INTERFACE:"//interface.bilibili.com",SAPI:"//api.bilibili.co",MANGA:"//manga.bilibili.com"},ct={data:function(){return{progress:0,loadStatus:!1,pic:"",x:0,y:0,size:0,width:0,data:null}},props:{aid:{required:!0},hit:{required:!0,default:!1},movex:{required:!0,default:0}},computed:{img:function(){return I(x(this.pic))},show:function(){return!(!this.hit||!this.data)}},watch:{hit:function(){this.hit&&!this.loadStatus&&this.ajax()},movex:function(t){this.onMouseMove(t)}},mounted:function(){this.width=this.$refs.cpm.offsetWidth},methods:{ajax:function(){var t=this;F({url:rt.API+"/pvideo",dataType:"jsonp",data:{type:"jsonp",aid:t.aid}}).done(function(i){t.loadStatus=!0,0===i.code&&i.data&&(t.pic=i.data.image[0],t.data=i.data)})},onMouseMove:function(t){if(this.loadStatus&&this.data){var i=this.data.index.length,e=this.data.img_y_size/this.data.img_x_size*this.width;this.progress=Math.floor(t/this.width*100),this.size=this.width*this.data.img_x_len;var a=Math.floor(t/this.width*i);this.x=-a%this.data.img_x_len*this.width,this.y=-Math.floor(a/this.data.img_x_len)*e}}}},dt=(e(102),Object(v.a)(ct,function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{ref:"cpm",class:t.show?"cover-preview-module show":"cover-preview-module"},[t.img?e("div",{staticClass:"cover",style:{backgroundImage:"url("+t.img+")",backgroundPosition:t.x+"px "+t.y+"px",backgroundSize:t.size+"px"}}):t._e(),e("div",{staticClass:"progress-bar"},[e("span",{style:{width:t.progress+"%"}})])])},[],!1,null,null,null).exports),ut={props:{aid:{required:!0},hit:{required:!0,default:!1}},data:function(){return{loadStatus:!1,timer:null,timeout:null,danmus:[],index:0,speed:5,dest:1.5}},watch:{hit:function(t){!t||this.loadStatus?t?this.start():(clearInterval(this.timer),clearTimeout(this.timeout)):this.ajax()}},destroyed:function(){clearInterval(this.timer),clearTimeout(this.timeout)},methods:{ajax:function(){var t=this;F({url:rt.API+"/x/v2/dm/ajax",data:{aid:t.aid,jsonp:"jsonp"},dataType:"jsonp"},!0).done(function(i){0===i.code&&(t.loadStatus=!0,t.danmus=i.data||[],t.start())})},start:function(){var t=this;this.$nextTick(function(){t.timer=setInterval(function(){if(t.index>t.danmus.length-1)clearInterval(t.timer),t.reset();else{var i=t.$refs["dm"+t.index]&&t.$refs["dm"+t.index][0];if(i&&i.offsetWidth){var e=i.offsetWidth;i.style.left=-e+"px",i.style.transition="left "+t.speed+"s linear",t.index++}else clearInterval(t.timer)}},1e3*t.dest)})},reset:function(){var t=this;t.timeout=setTimeout(function(){t.index=0;for(var i=0;i<t.danmus.length;i++){var e=t.$refs["dm"+i]&&t.$refs["dm"+i][0];e&&(e.style.left="",e.style.transition="")}t.start(),clearTimeout(t.timeout)},1e3*t.speed-1e3*t.dest)}}},mt=(e(103),Object(v.a)(ut,function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{class:t.hit?"danmu-module show":"danmu-module"},t._l(t.danmus,function(i,a){return e("p",{ref:"dm"+a,refInFor:!0,class:a%2==0?"dm":"dm row2"},[t._v(t._s(i))])}),0)},[],!1,null,null,null).exports),pt={props:{aid:{}},data:function(){return{added:!1,timer:null}},methods:{handleClick:function(t){t.preventDefault(),t.stopPropagation();try{L()?this.added?(this.removeToList(),A("watch_later_del")):(this.addToList(),A("watch_later_add")):this.quickLogin()}catch(t){}},addToList:function(){var t=this;F({url:rt.API+"/x/v2/history/toview/add",type:"POST",data:{aid:t.aid,jsonp:"jsonp",csrf:y.get("bili_jct")},dataType:"json",xhrFields:{withCredentials:!0}}).done(function(i){0===i.code?(t.added=!0,t.showHint(t.$el,"已加稍后再看",1500)):t.showHint(t.$el,i.message,1500)}).fail(function(){t.showHint(t.$el,"添加失败，请重试",1500)})},removeToList:function(){var t=this;F({url:rt.API+"/x/v2/history/toview/del",type:"POST",data:{jsonp:"jsonp",aid:t.aid,csrf:y.get("bili_jct")},xhrFields:{withCredentials:!0}}).done(function(i){i&&0===i.code?(t.added=!1,t.showHint(t.$el,"已从稍后再看列表中移除",1500)):t.showHint(t.$el,d.message,1500)}).fail(function(i){t.showHint(t.$el,"移除失败，请重试",1500)})},showHint:function(t,i,e){clearTimeout(this.timer),$("body .watch-later-hint").remove();var a=$('<div class="watch-later-hint">'+i+"</div>");$("body").append(a);var n=$(t).offset().left-(a.outerWidth()-$(t).outerWidth())/2,s=$(t).offset().top-$(t).height()-8;a.css({top:s,left:n}).fadeIn(),e&&(this.timer=setTimeout(function(){a.fadeOut()},e))},hideHint:function(){$("body .watch-later-hint").remove()},over:function(){var t=this.added?"移除":"稍后再看";this.showHint(this.$el,t)},out:function(){this.hideHint()},quickLogin:function(){UserStatus.quickLogin()}}},ft=(e(104),{components:{CoverPreview:dt,Danmu:mt,BiliImg:E,WatchLater:Object(v.a)(pt,function(){var t=this,i=t.$createElement;return(t._self._c||i)("div",{staticClass:"watch-later-trigger",class:t.added?"added":"",on:{click:function(i){return t.handleClick(i)},mouseover:function(i){return t.over()},mouseout:function(i){return t.out()}}})},[],!1,null,null,null).exports},data:function(){return{hit:!1,movex:0,timeout:null}},props:{config:{type:Object},data:{required:!0},adData:{},viewStat:{default:!0},dataLocId:{default:null}},computed:{corner:function(){var t=this.data.stat.coin||0;return t<2e3?"":t>=2e3&&t<1e4?"silvery":t>=1e4?"golden":void 0},noWatchLater:function(){return this.config&&13===this.config.tid},cardPic:function(){return this.adData&&this.adData.is_ad_loc&&this.adData.pic?this.adData.pic:this.data.pic}},destroyed:function(){clearTimeout(this.timeout)},methods:{onMouseEnter:function(){var t=this;clearTimeout(t.timeout),t.timeout=setTimeout(function(){t.hit||(t.hit=!0),clearTimeout(t.timeout)},500)},onMouseLeave:function(){clearTimeout(this.timeout),this.hit=!1,this.movex=0},onMouseMove:function(t){this.movex=t.layerX||0}}}),ht=(e(105),{components:{CardSpread:Object(v.a)(ft,function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"spread-module",attrs:{"data-id":t.adData&&t.adData.id,"data-loc-id":t.dataLocId},on:{mouseenter:t.onMouseEnter,mouseleave:t.onMouseLeave,mousemove:t.onMouseMove}},[a("a",{directives:[{name:"ad",rawName:"v-ad",value:{data:t.adData,id:t.dataLocId,report:!0},expression:"{data:adData,id:dataLocId,report:true}"}],attrs:{href:t.$transformLink(t.data.aid,t.data.bvid),target:"_blank"}},[a("div",{staticClass:"pic"},[a("bili-img",{attrs:{src:t.cardPic,alt:t.data.title,width:160,height:100}}),t.viewStat?a("i",{class:"icon medal "+t.corner}):t._e(),a("cover-preview",{attrs:{aid:t.data.aid,hit:t.hit,movex:t.movex}}),a("div",{staticClass:"mask-video"}),a("danmu",{attrs:{aid:t.data.aid,hit:t.hit}}),t.data.duration?a("span",{staticClass:"dur"},[t._v(t._s(t._f("formatDuration")(t.data.duration)))]):t._e(),t.data.label?a("span",{staticClass:"promote",domProps:{textContent:t._s(t.data.label)}}):t._e(),t.adData&&t.adData.is_ad?a("img",{staticClass:"gg-pic",attrs:{src:e(101)}}):t._e(),t.noWatchLater?t._e():a("watch-later",{staticClass:"w-later",attrs:{aid:t.data.aid}})],1),a("p",{staticClass:"t",attrs:{title:t.data.title},domProps:{textContent:t._s(t.data.title)}}),t.viewStat?a("p",{staticClass:"num"},[a("span",{staticClass:"play"},[a("i",{staticClass:"icon"}),t._v(t._s(t._f("formatNum")(t.data.stat.view)))]),a("span",{staticClass:"danmu"},[a("i",{staticClass:"icon"}),t._v(t._s(t._f("formatNum")(t.data.stat.danmaku)))])]):t._e()])])},[],!1,null,null,null).exports},props:{aid:{default:""}},data:function(){return{lists:[],size:"wide"===a.a.getScreenMode()?5:4,curPage:1}},computed:{curList:function(){return this.lists.slice((this.curPage-1)*this.size,this.curPage*this.size)},pageNum:function(){return this.lists.length?Math.ceil(this.lists.length/this.size):1}},watch:{aid:function(t){t&&this.getRecommend()}},mounted:function(){var t=this;this.getRecommend(),lt.$on("screenModeChange",function(i){t.size="wide"===i?5:4})},methods:{nextPage:function(t){var i=this.curPage+t;i<=0?this.curPage=this.pageNum:i>this.pageNum?this.curPage=1:this.curPage=i},getRecommend:function(){var t=this;t.aid&&F({url:"//comment.bilibili.com/recommendnew,"+t.aid,dataType:"json"}).done(function(i){i&&0===i.code&&(t.lists=i.data)})}}}),vt=(e(106),Object(v.a)(ht,function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.lists?e("div",{staticClass:"also-like"},[e("div",{staticClass:"also-like__title"},[t._v("看过该视频的还喜欢")]),e("div",{staticClass:"also-like__list-wrap"},[t.pageNum>1?e("div",{staticClass:"also-like__page also-like__page--pre",on:{click:function(i){return t.nextPage(-1)}}},[e("i",{staticClass:"also-like__icon also-like__icon--pre"})]):t._e(),t.pageNum>1?e("div",{staticClass:"also-like__page also-like__page--next",on:{click:function(i){return t.nextPage(1)}}},[e("i",{staticClass:"also-like__icon also-like__icon--next"})]):t._e(),e("div",{staticClass:"also-like__card-wrap"},t._l(t.curList,function(t,i){return e("card-spread",{key:t.aid,staticClass:"also-like__card",attrs:{data:t,viewStat:!1}})}),1)])]):t._e()},[],!1,null,null,null).exports),wt={},bt=Object(v.a)(wt,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"elec-rank-sec"})},[],!1,null,null,null).exports,gt={components:{BiliImg:E},props:{id:{},subid:{}},data:function(){return{live:{}}},mounted:function(){this.getLive()},methods:{getLive:function(){var t=this;F({url:"//api.live.bilibili.com/bili/LiveRecommend",data:{id:this.id,tid:this.subid},dataType:"jsonp",jsonpCallback:"liveRecommendXhrDone",cache:!0}).done(function(i){0===i.code&&(i.data.length>1?t.live=i.data[Math.floor(Math.random()*i.data.length)]:t.live=i.data)})}}},yt=(e(107),{components:{ElecRank:bt,PopLive:Object(v.a)(gt,function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"pop-live"},[e("div",{staticClass:"pl__head"},[t._v("大家围观的直播")]),e("div",{staticClass:"pl__card"},[e("a",{attrs:{href:t.live.link,target:"_blank",title:t.live.title}},[t._m(0),e("bili-img",{attrs:{src:t.live.pic,width:258,height:160}}),e("div",{staticClass:"pl__info"},[e("bili-img",{staticClass:"pl__face",attrs:{src:t.live.face,width:48,height:48}}),e("div",[e("p",{staticClass:"pl__title",domProps:{textContent:t._s(t.live.title)}}),e("p",{staticClass:"pl__user"},[e("span",{staticClass:"pl__user__block pl__name"},[e("i",{staticClass:"pl__icon pl__icon--user"}),e("span",{domProps:{textContent:t._s(t.live.uname)}})]),e("span",{staticClass:"pl__user__block pl__online"},[e("i",{staticClass:"pl__icon pl__icon--online"}),e("span",{domProps:{textContent:t._s(t.live.online)}})])])])],1)],1)])])},[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"pl__mask"},[i("div",{staticClass:"pl__live"},[i("i",{staticClass:"pl__icon--live"}),i("span",{staticClass:"pl__live__text"},[this._v("LIVE")])])])}],!1,null,null,null).exports}}),Ct=(e(108),{components:{Tags:nt,VideoDesc:ot,SideInfo:Object(v.a)(yt,function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"side-info-wrapper"},[i("elec-rank")],1)},[],!1,null,null,null).exports,AlsoLike:vt},props:{desc:{},aid:{},reprint:{}}}),_t=(e(109),Object(v.a)(Ct,function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"video-ex-info bili-wrapper clearfix"},[i("div",{staticClass:"ex-wrapper"},[i("tags"),i("video-desc",{attrs:{desc:this.desc,reprint:this.reprint}}),i("also-like",{attrs:{aid:this.aid}}),this._m(0)],1),i("side-info",{staticClass:"side-info"})],1)},[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"common"},[i("div",{staticClass:"b-head"},[i("span",{staticClass:"b-head-t results"}),i("span",{staticClass:"b-head-t"},[this._v("评论")])]),i("div",{staticClass:"comment"})])}],!1,null,null,null).exports),Tt={data:function(){return{navShow:!1,playShow:!1,miniShow:!1,gPoint:1200,lastPos:{x:0,y:0}}},mounted:function(){},methods:{onScroll:function(){var t=this;$(window).on("scroll.fixednav",function(){var i=$(window).scrollTop();t.navShow=i>135,t.miniShow=i>t.gPoint,t.initMiniPlay()})},goTop:function(){$("body,html").animate({scrollTop:0},300)},miniSwitch:function(){},initMiniPlay:function(){var t=$("#bofqi");this.miniShow&&this.playShow?t.hasClass("mini-player")||(t.addClass("mini-player").append('<div class="drag-bar"><i class="icon d-icon"></i><i class="icon x-icon"></i></div>'),t.css({left:this.lastPos.x,top:this.lastPos.y}),this.bindEvent(t)):t.hasClass("mini-player")&&(t.removeClass("mini-player").css({left:"",top:""}),$(".drag-bar").remove())},bindEvent:function(t){var i=this;t.off("click.mini-player").on("click.mini-player",".x-icon",function(t){i.miniSwitch(),t.stopPropagation()}),t.off("mousedown.mini-player").on("mousedown.mini-player",".drag-bar",function(e){var a=e.clientX-t.offset().left,n=e.clientY-t.offset().top;$(document).off("mousemove.mini-player").on("mousemove.mini-player",function(e){var s=e.clientX-a,o=e.clientY-n-$(window).scrollTop();t.css({left:s,top:o}),i.lastPos={x:s,y:o},e.preventDefault()})}),$(document).off("mouseup.mini-player").on("mouseup.mini-player",function(t){$(document).off("mousemove.mini-player")})}}},Mt=(e(110),Object(v.a)(Tt,function(){var t=this.$createElement,i=this._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:this.navShow,expression:"navShow"}],staticClass:"fixed-nav-m"},[i("div",{staticClass:"go-top icon",attrs:{title:"返回顶部"},on:{click:this.goTop}}),this._e()])},[],!1,null,null,null).exports),Ut={on:"//static.hdslb.com/images/coin/22-gray.png",off:"//static.hdslb.com/images/coin/22.gif"},It={on:"//static.hdslb.com/images/coin/33-gray.png",off:"//static.hdslb.com/images/coin/33.gif"},kt={data:function(){return{openStatus:!1,batter:!0,coinStorage:0,experience:0,usedCoins:0,followCount:0}},computed:{vacancy:function(){return 1==this.copyright?(this.batter=!0,1==this.usedCoins&&(this.batter=!1),2-this.usedCoins):2==this.copyright?(this.batter=!1,1-this.usedCoins):void 0},navStatus:function(){return this.batter?{22:{img:Ut.on},33:{img:It.off}}:{22:{img:Ut.off},33:{img:It.on}}},followPanel:function(){return this.followCount>0&&!this.followed}},props:["aid","mid","followed","coined","coinable","copyright"],methods:{init:function(){this.aid&&(this.askCoinUsed(),this.askExperience())},askCoinUsed:function(){var t=this;F({url:"//api.bilibili.com/x/web-interface/archive/coins",type:"get",dataType:"jsonp",data:{jsonp:"jsonp",aid:this.aid},success:function(i){t.usedCoins=i&&i.data&&i.data.multiply,q.$emit("coined",{flag:Boolean(i.data.multiply),num:0}),q.$emit("coinable",Boolean(t.vacancy))}})},askExperience:function(){var t=this;F({url:"//www.bilibili.com/plus/account/exp.php",type:"get",dataType:"json",success:function(i){t.experience=i.number}})},showPanel:function(){this.openStatus=!0},hidePanel:function(){this.openStatus=!1},sendIcons:function(){var t=this;F({url:"//api.bilibili.com/x/web-interface/coin/add",type:"post",data:{aid:this.aid,multiply:this.batter?2:1,cross_domain:!0},xhrFields:{withCredentials:!0},success:function(i){0===i.code?t.afterSend(i):R({el:$(".coin-sure.b-btn",t.$el),msg:i.message})},error:function(){R({el:$(".coin-sure.b-btn",t.$el),msg:"请求失败，请检查网络"})}})},afterSend:function(t){0===t.code&&(this.hidePanel(),this.usedCoins+=this.batter?2:1,this.experience+=this.batter?20:10,this.followed||(this.followCount=6,this.closeFollowPanel()),q.$emit("coined",{flag:!0,num:this.usedCoins}),q.$emit("coinable",Boolean(this.vacancy)))},reload:function(){this.init()},closeFollowPanel:function(){this.followCount--,this.followCount>=1&&setTimeout(this.closeFollowPanel,1e3)},follow:function(){X({fid:this.mid,act:1,re_src:14},function(t){0===t.code&&q.$emit("toggleFollowStatus",!0)})}},mounted:function(){var t=this,i=this;q.$on("openCoin",function(){i.vacancy>0&&i.showPanel()}),q.$on("closeCoin",function(){t.hidePanel()}),this.init(),window.playerCallSendCoin=function(){t.showPanel()}},watch:{aid:function(){this.reload()}}},xt=(e(111),Object(v.a)(kt,function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("transition",{attrs:{name:"mask"}},[1==t.openStatus?e("div",{staticClass:"coin-mask"}):t._e()]),e("transition",{attrs:{name:"coin-container"}},[1==t.openStatus?e("div",{staticClass:"coin-wrap "},[e("div",{staticClass:"coin-content"},[e("i",{staticClass:"b-icon-close",on:{click:t.hidePanel}}),e("p",{staticClass:"coin-title"},[t._v("给视频投上"),1==t.vacancy?e("i",[t._v("1")]):e("i",[t._v(t._s(t.batter?2:1))]),t._v("个硬币")]),1==t.vacancy?e("div",{staticClass:"coin-nav"},[e("div",{staticClass:"coin-checkbox on"},[e("p",{staticClass:"lable"},[t._v("1硬币")]),e("img",{attrs:{src:"//static.hdslb.com/images/coin/22.gif"}})])]):e("div",{staticClass:"coin-nav"},[e("div",{staticClass:"coin-checkbox margin",class:{on:!t.batter},on:{click:function(i){t.batter=!1}}},[e("p",{staticClass:"lable"},[t._v("1硬币")]),e("img",{attrs:{src:t.navStatus[22].img}})]),e("div",{staticClass:"coin-checkbox ",class:{on:t.batter},on:{click:function(i){t.batter=!0}}},[e("p",{staticClass:"lable"},[t._v("2硬币")]),e("img",{attrs:{src:t.navStatus[33].img}})])]),e("a",{staticClass:"coin-sure b-btn",attrs:{href:"javascript:void(0)"},on:{click:function(i){return t.sendIcons()}}},[t._v("确定")]),t.experience<50?e("p",{staticClass:"coin-tips "},[t._v("经验值+"),e("i",[t._v(t._s(t.batter?2:1)+"0")]),t._v("（今日"),e("i",[t._v(t._s(t.experience))]),t._v("/50）")]):e("p",{staticClass:"coin-tips "},[t._v("今日投币+50经验成就 get√ 赞！")])])]):t._e()]),e("transition",{attrs:{name:"follow-panel"}},[t.followPanel?e("div",{staticClass:"m-layer"},[e("div",{staticClass:"title"},[t._v("投币成功，感谢您的支持")]),e("div",[e("a",{staticClass:"attention-btn",on:{click:t.follow}},[t._v("关注")]),t._v("\n        UP主, 及时了解TA的最新作品~\n      ")]),e("div",{staticClass:"close-btn",on:{click:function(i){t.followCount=0}}},[t._v("\n        关闭\n        "),e("span",[t._v("("+t._s(t.followCount)+")")])])]):t._e()])],1)},[],!1,null,"50dd9748",null).exports),jt="//api.bilibili.com",Dt={list:"/x/v2/fav/folder",create:"/x/v2/fav/folder/add",add:"/x/v2/fav/video/add",del:"/x/v2/fav/video/del",default:"/x/v2/fav/video/favoured"},At={data:function(){return{openStatus:!1,loaded:!1,favStatus:[],addList:[],delList:[],pigeon:0,listMinHeight:44,createNewFolderModule:!1,createFavTip:localStorage.getItem("favCreateFolderTip"),newFolderName:""}},props:{aid:{},collected:{type:Boolean}},computed:{syncAble:function(){return this.addList.length+this.delList.length},newFolderNameError:function(){return this.newFolderName.length>15},inFavlist:function(){var t=this.favStatus,i=!1,e=!0,a=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(e=(s=o.next()).done);e=!0){if(s.value.favoured){i=!0;break}}}catch(t){a=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(a)throw n}}return i}},methods:{init:function(){this.aid&&this.askStorage()},showPanel:function(){this.loaded=!1,this.pigeon=0,this.askFavStatus(),this.openStatus=!0},hidePanel:function(){this.createNewFolderModule=!1,this.openStatus=!1},askStorage:function(){var t=this;F({url:jt+Dt.default,type:"get",data:{aid:t.aid,jsonp:"jsonp"},xhrFields:{withCredentials:!0},success:function(i){switch(i.data&&i.data.count){case 1:t.listMinHeight=44;break;case 2:t.listMinHeight=72;break;case 3:t.listMinHeight=120;break;case 4:t.listMinHeight=168;break;default:t.listMinHeight=216}q.$emit("inFavouriteList",Boolean(i.data&&i.data.favoured))}})},askFavStatus:function(){var t=this;this.loaded=!1,F({url:jt+Dt.list,type:"get",data:{aid:this.aid,jsonp:"jsonp"},xhrFields:{withCredentials:!0},success:function(i){if(t.loaded=!0,0==i.code){var e=[],a=[],n=!0,s=!1,o=void 0;try{for(var l,r=i.data[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var c=l.value;c.BEfavoured=c.favoured,c.favoured?e.push(c):a.push(c)}}catch(t){s=!0,o=t}finally{try{n||null==r.return||r.return()}finally{if(s)throw o}}t.favStatus=e.concat(a)}}})},changeFavStatus:function(t){t.cur_count>=t.max_count&&!t.favoured||(t.favoured=t.favoured?0:1,t.cur_count+=t.favoured?1:-1,this.checkFavStatus())},checkFavStatus:function(){this.addList=[],this.delList=[];var t=!0,i=!1,e=void 0;try{for(var a,n=this.favStatus[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var s=a.value;s.favoured!=s.BEfavoured&&(s.favoured?this.addList.push(s.fid):this.delList.push(s.fid))}}catch(t){i=!0,e=t}finally{try{t||null==n.return||n.return()}finally{if(i)throw e}}},sync:function(){this.addList.length&&(this.syncAddList(),this.pigeon++),this.delList.length&&(this.syncDelList(),this.pigeon++)},syncAddList:function(){var t=this;F({url:jt+Dt.add,type:"post",data:{aid:this.aid,fid:this.addList.join(","),jsonp:"jsonp"},xhrFields:{withCredentials:!0},success:function(){t.pigeon--,t.addList=[],0==t.pigeon&&t.hidePanel(),t.inFavlist!=t.collected&&q.$emit("inFavouriteList",t.inFavlist)}})},syncDelList:function(){var t=this;F({url:jt+Dt.del,type:"post",data:{aid:this.aid,fid:this.delList.join(","),jsonp:"jsonp"},xhrFields:{withCredentials:!0},success:function(){t.pigeon--,t.delList=[],0==t.pigeon&&t.hidePanel(),t.inFavlist!=t.collected&&q.$emit("inFavouriteList",t.inFavlist)}})},switchCreateNewFolderModule:function(){this.favStatus.length>=50?R({el:$(".fav-new-placeholder",this.$el),msg:"收藏夹个数已达到上限"}):this.createNewFolderModule=!0},createNewFolder:function(){if(this.newFolderName)if(this.newFolderNameError)R({el:$(".fav-new-btns",this.$el),msg:"收藏夹名超过限制"});else{var t=this;F({url:jt+Dt.create,type:"post",xhrFields:{withCredentials:!0},data:{name:t.newFolderName,jsonp:"jsonp"},success:function(i){"0"==i.code?(t.favStatus.push({favoured:1,BEfavoured:0,name:t.newFolderName,max_count:999,cur_count:1,fid:i.data.fid,state:2}),t.createNewFolderModule=!1,t.checkFavStatus()):R({el:$(".fav-new-btns",t.$el),msg:i.message})},error:function(){R({el:$(".fav-new-btns",t.$el),msg:"请求失败"})}})}else R({el:$(".fav-new-btns",this.$el),msg:"请填写收藏夹名称"})},removeTip:function(){this.createFavTip=!0,localStorage.setItem("favCreateFolderTip",1)},reload:function(){this.init()}},mounted:function(){var t=this;t.init(),q.$on("openFav",function(){t.showPanel()}),q.$on("closeFav",function(){t.hidePanel()})},watch:{createNewFolderModule:function(t){this.newFolderName=""},aid:function(){this.reload()}}},$t=(e(112),Object(v.a)(At,function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("transition",{attrs:{name:"mask"}},[t.openStatus?e("div",{staticClass:"collection-mask"}):t._e()]),e("transition",{attrs:{name:"fav-wnd"}},[t.openStatus?e("div",{staticClass:"fav-wnd",attrs:{id:"fav_wnd"}},[e("div",{staticClass:"fav-hd"},[t._v("添加到收藏夹"),e("i",{staticClass:"b-icon b-icon-a b-icon-close",on:{click:function(i){return t.hidePanel()}}})]),e("div",{staticClass:"fav-bd"},[t.createNewFolderModule?e("div",{staticClass:"fav-mask",on:{click:function(i){t.createNewFolderModule=!1}}}):t._e(),e("div",{staticClass:"fav-list-wrp"},[e("ul",{staticClass:"fav-list",style:{"min-height":t.listMinHeight+"px"}},[t.loaded?t._e():e("li",{staticClass:"loading"},[t._v("loading...")]),t._l(t.favStatus,function(i){return t.loaded?e("li",{class:{lock:i.cur_count>=i.max_count&&!i.favoured}},[e("div",{staticClass:"list-item-name",on:{title:i.name,click:function(e){return t.changeFavStatus(i)}}},[e("i",{staticClass:"radius-box",class:{on:i.favoured,off:!i.favoured}}),t._v(t._s(i.name)),3==i.state?e("i",{staticClass:"personal"},[t._v("[私密]")]):t._e(),i.state?e("div",{staticClass:"fav-count"},[t._v(t._s(i.cur_count)+"/"+t._s(i.max_count))]):e("div",{staticClass:"fav-count"},[t._v(t._s(i.cur_count))])])]):t._e()})],2),t.createNewFolderModule?t._e():e("div",{staticClass:"fav-new-placeholder",on:{click:function(i){return t.switchCreateNewFolderModule()}}},[e("span",{staticClass:"fav-icon-add"}),e("span",{staticClass:"txt"},[t._v("新建收藏夹")])]),t.createNewFolderModule?e("div",{staticClass:"fav-new-wrp",class:{error:t.newFolderNameError}},[t.createFavTip?t._e():e("div",{staticClass:"fav-add-tip"},[t._v("点击弹窗内其他区域或ESC键，取消新建收藏夹"),e("i",{staticClass:"blue-arrow"}),e("i",{staticClass:"icon-close",on:{click:function(i){return t.removeTip()}}})]),e("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.newFolderName,expression:"newFolderName"}],staticClass:"fav-input",attrs:{placeholder:"最多输入15个字"},domProps:{value:t.newFolderName},on:{keydown:[function(i){if(!i.type.indexOf("key")&&t._k(i.keyCode,"esc",27,i.key,["Esc","Escape"]))return null;t.createNewFolderModule=!1},function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.createNewFolder()}],input:function(i){i.target.composing||(t.newFolderName=i.target.value)}}}),e("div",{staticClass:"fav-new-btns",on:{click:function(i){return t.createNewFolder()}}},[t._v("新建")])]):t._e()]),e("div",{staticClass:"fav-sure-wrp"},[e("div",{staticClass:"fav-sure",class:{on:t.syncAble},on:{click:t.sync}},[t._v("确定")])])]),e("iframe",{staticClass:"layout",attrs:{frameborder:"0"}})]):t._e()])],1)},[],!1,null,null,null).exports);e(113);function Jt(){}var Lt={};Jt.prototype={initCrossdomain:function(){window.location.href.match(/\.bilibili\.tv/)?(Lt.interface_domain="interface.bilibili.tv",document.domain="bilibili.tv"):window.location.href.match(/\.bilibili\.com/)?(Lt.interface_domain="interface.bilibili.com",document.domain="bilibili.com"):(Lt.interface_domain="interface.bilibili.cn",document.domain="bilibili.cn")},addBlacklist:function(t,i){var e=i||null;this.todoFriend({act:"add_badlist",format:"json",uid:t},e)},follow:function(t,i){var e=i||null;this.todoFriend({act:"add",attention:1,format:"json",uid:t},e)},whisperUser:function(t,i){var e=i||null;this.todoFriend({act:"add",attention:0,format:"json",uid:t},e)},unFollow:function(t,i){var e=i||null;this.todoFriend({act:"del",attention:0,format:"json",uid:t},e)},delFans:function(t,i){var e=i||null;this.todoFriend({act:"delFans",attention:0,format:"json",uid:t},e)},todoFriend:function(t,i){this.initCrossdomain(),function(t){var i=t.callback||"_jsonpCallback_"+(new Date).getTime(),e=$('<iframe name="frm'+i+'" id="frm'+i+'" style="visibility:hidden; width:1px; height:1px"></iframe>').appendTo("body"),a=$('<form action="'+t.url+'" method="POST" target="frm'+i+'"></form>').appendTo("body");for(var n in void 0===t.data&&(t.data={}),t.data.csrf=y.get("bili_jct"),t.data[t.jsonpCallback||"callback"]=i,t.data)$('<input type="hidden" name="'+n+'" />').appendTo(a).val(t.data[n]);window[i]=function(i){"function"==typeof t.success&&t.success(i),"function"==typeof t.complete&&t.complete(i),e.remove(),a.remove()},a.submit()}({url:"//"+Lt.interface_domain+"/m/friend_manage.do",data:t,success:function(t){-665!=t.code?i&&i(t):$.getScript("//static.hdslb.com/plugins/attentionLimitPopup/attentionLimitPopup.js",function(){new attentionLimitPopup})}})}};var St=new Jt,Nt=0;function Et(t){this.userStatus=$.extend({isLogin:!1,vipStatus:0,vipType:0,mid:null},t),this._registerEvent()}Et.prototype.reset=function(t){this.userStatus=t},Et.prototype._renderCard=function(t){$(".user-card").remove(),$("body").append(this._createCard(t))},Et.prototype._renderErrorCard=function(){$(".user-card").remove(),$("body").append(this._createErrorCard())},Et.prototype._renderLoadingCard=function(){$(".user-card").remove(),$("body").append(this._createLoadingCard())},Et.prototype._isLikeMe=function(t){if(t.card&&t.card.attentions)for(var i=0,e=t.card.attentions.length;i<e;++i)if(t.card.attentions[i]===this.userStatus.mid)return!0;return!1},Et.prototype._createCard=function(t){var i,e,a=t.space.s_img?t.space.s_img:"//i0.hdslb.com/bfs/static/c9dae917e24b4fc17c4d544caf6b6c0b17f8692b.jpg",n=0===t.card.official_verify.type?'<i title="个人认证" class="auth p-auth"></i>':"",s=1===t.card.official_verify.type?'<i title="企业/团体认证" class="auth o-auth"></i>':"",o="保密"===t.card.sex?"":"男"===t.card.sex?'<i class="sex men"></i>':'<i class="sex women"></i>',l=t.card.sign?'<p class="sign">'+((i=t.card.sign)?i.replace(e||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(t,i){return i?t:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[t]}):"")+"</p>":"",r=2===t.card.vip.vipType&&1===t.card.vip.vipStatus?"vip-red-name":"",c=this._isLikeMe(t),d=c&&t.following?"互相关注":t.following?"已关注":"+关注",u=t.following?"liked":"";return u+=c?" liked-me":"",'<div class="user-card"><div class="bg" style="background-image:url('+I(x(a,750,240))+')"></div><a target="_blank" href="//space.bilibili.com/'+t.card.mid+'" class="face"><img src="'+I(x(t.card.face,50,50))+'" />'+n+s+'</a><div class="info"><p class="user"><a target="_blank" href="//space.bilibili.com/'+t.card.mid+'" class="name '+r+'">'+t.card.name+"</a>"+o+'<a href="//www.bilibili.com/html/help.html#k_'+t.card.level_info.current_level+'" target="_blank"><i class="level l'+t.card.level_info.current_level+'"></i></a></p><p class="social"><a href="//space.bilibili.com/'+t.card.mid+'/#!/fans/follow" target="_blank">关注: <span class="like">'+t.card.friend+'</span></a><a href="//space.bilibili.com/'+t.card.mid+'/#!/fans/fans" target="_blank">粉丝: <span class="fans">'+T(t.card.fans)+"</span></a></p>"+l+'</div><div class="btn-box"><a class="like '+u+'" mid="'+t.card.mid+'"><span class="default-text">'+d+'</span><span class="hover-text">取消关注</span></a><a href="//message.bilibili.com/#whisper/mid'+t.card.mid+'" target="_blank" class="message">发消息</a></div></div>'},Et.prototype._createErrorCard=function(){return'<div class="user-card"><p class="error-card">加载失败</p></div>'},Et.prototype._createLoadingCard=function(){return'<div class="user-card"><p class="loading-card">正在加载中...请稍后。</p></div>'},Et.prototype._setPosition=function(t){var i=$(t).offset().left,e=$(t).offset().top;$(t).outerWidth();if(i+$(".user-card").outerWidth()>$(window).width()&&(i-=i+$(".user-card").outerWidth()-$(window).width()),$(t).offset().top<$(window).scrollTop()+$(".user-card").height()+32)var a=e+$(t).outerHeight()+8;else a=e-$(".user-card").height()-32-8;$(".user-card").css({left:i,top:a})},Et.prototype._registerEvent=function(){var t=this;$("body").off("click.userCardAttention").on("click.userCardAttention",".user-card .btn-box .like",function(){if(t.userStatus.isLogin){var i=$(this).hasClass("liked"),e=($(this).hasClass("liked-me"),$(this).attr("mid")),a=this;i?St.unFollow(e,function(t){t&&0===t.code?($(a).removeClass("liked").find(".default-text").text("+关注"),R({el:$(a),msg:"取消关注成功!",cd:1e3})):t&&R({el:$(a),msg:t.msg,cd:1e3,type:"error"})}):St.follow(e,function(t){-665==t.code?$.getScript("//static.hdslb.com/plugins/attentionLimitPopup/attentionLimitPopup.js",function(){new attentionLimitPopup}):t&&0===t.code?($(a).text("取消关注").addClass("liked"),R({el:$(a),msg:"关注成功!",cd:1e3})):t&&R({el:$(a),msg:t.msg,cd:1e3,type:"error"})})}else document.location.href="https://account.bilibili.com/login"}),$("body").off("mouseenter.data-userCard").on("mouseenter.data-userCard","[data-usercard-mid]",function(i){var e=$(this).attr("data-usercard-mid"),a=this;clearTimeout(Nt),Nt=setTimeout(function(){t._renderLoadingCard(),t._setPosition(a),F({url:"//api.bilibili.com/x/web-interface/card",dataType:"jsonp",data:{mid:e,jsonp:"jsonp",photo:1},type:"GET"}).done(function(i){i&&0===i.code&&(t._renderCard(i.data),t._setPosition(a))}).fail(function(i){t._renderErrorCard(),t._setPosition(a)})},300)}),$("body").off("mouseleave.data-userCard").on("mouseleave.data-userCard","[data-usercard-mid]",function(t){clearTimeout(Nt),Nt=setTimeout(function(){$(".user-card").remove()},100)}),$("body").off("mouseenter.userCard").on("mouseenter.userCard",".user-card",function(t){clearTimeout(Nt)}),$("body").off("mouseleave.userCard").on("mouseleave.userCard",".user-card",function(t){$(".user-card").remove()})};var Pt=Et,Vt=function(t,i){var e=(new Date).getTime(),a=y.get("buvid3")||"";return(i.indexOf("?")>-1?"&":"?")+"share_medium=web&share_source="+t+"&bbid="+a+"&ts="+e},Ot={openShareWindow:function(t,i){var e=[];for(var a in i)null!=i[a]&&e.push(a+"="+encodeURIComponent(i[a]));var n=t+e.join("&");return window.open(n,"","width=760, height=640, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no"),!1},bind:function(t,i){t=$.extend(!0,{title:document.title,url:location.href,desc:"",pic:"",summary:"",shortTitle:"",searchPic:!1,appkey:{weibo:"2841902482",qqweibo:"84435a83a11c484881aba8548c6e7340"},weiboTag:"",twitterTag:"",tp_id:0,aid:""},t);var e=this;$(".bili-share").off("click").on("click",function(){switch($(this).attr("data-share-id")){case"weibo":e.openShareWindow("http://service.weibo.com/share/share.php?",{url:t.url+Vt("weibo",t.url),type:"3",count:"1",appkey:t.appkey.weibo,title:t.title+t.weiboTag,pic:t.pic,searchPic:t.searchPic,ralateUid:"",language:"zh_cn",rnd:(new Date).valueOf()});break;case"qzone":e.openShareWindow("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?",{url:t.url+Vt("qqzone",t.url),showcount:1,desc:t.desc,summary:t.summary,title:t.shortTitle,site:"哔哩哔哩",pics:t.pic,style:"203",width:98,height:22});break;case"qq":e.openShareWindow("http://connect.qq.com/widget/shareqq/index.html?",{url:t.url+Vt("qq",t.url),desc:t.desc,title:t.title,summary:t.summary,pics:t.pic,flash:"",site:"",style:"201",width:32,height:32});break;case"tieba":e.openShareWindow("http://tieba.baidu.com/f/commit/share/openShareApi?",{title:t.title,url:t.url+Vt("baidu",t.url)+"&sharechannel=baidu",uid:726865,to:"tieba",type:"text",relateUid:"",pic:t.pic,key:"",sign:"on",desc:"",comment:t.desc})}F({url:rt.API+"/x/web-interface/share/add",type:"POST",data:{aid:t.aid,jsonp:"jsonp"},xhrFields:{withCredentials:!0},dataType:"json"}).done(function(t){t&&0==t.code&&i&&i(t.data)})})},init:function(t,i){this.bind(t,i)}},Ft="//api.bilibili.com/x/tag/",Qt={tags:"archive/tags",add:"archive/add",del:"archive/del",subscribe:"subscribe/add",unsubscribe:"subscribe/cancel",like:"archive/like2",hate:"archive/hate2",report:"archive/report"},Bt=function(t){return!/select|update|delete|truncate|join|union|exec|insert|drop|count|’|"|;|>|<|%/i.test(t)},Rt=function(t,i){return t.replace(/\\?\{([^}]+)\}/g,function(t,e){return"\\"==t.charAt(0)?t.slice(1):null!=i[e]?i[e]:""})},Xt=4,qt=3,Ht=1,zt=1,Gt={uid:"",mid:"",aid:""},Wt={todo:function(t){UserStatus.isLogin()?t():biliQuickLogin(function(){location.reload()})},del:function(t,i){var e=this;this.todo(function(){e.isUp()?t():UserStatus.level()>=Xt?t():R({el:i,msg:"升级到LV4就能删除标签啦~",cd:1e3})})},add:function(t,i){var e=this;this.todo(function(){e.isUp()?t():UserStatus.level()>=qt?t():R({el:i,msg:"升级到LV3就能添加标签啦~",cd:1e3})})},report:function(t,i){var e=this;this.todo(function(){e.isUp()?t():UserStatus.level()>=Ht?t():R({el:i,msg:"升级到LV1就能举报啦~",cd:1e3})})},topOrTread:function(t,i){var e=this;this.todo(function(){e.isUp()?t():UserStatus.level()>=zt?t():R({el:i,msg:"升级到LV1就能顶/踩啦~",cd:1e3})})},isUp:function(){return parseInt(Gt.uid)===parseInt(Gt.mid)}},Yt={tagList:[],isOpenInfo:!1,msgTime:1500,currentIndex:0,isOver:!1},Zt={isRemove:!1,panel:null,delPanel:null,reportPanel:null,state:{reportType:null},domBox:"<div data-index={index} class='tag-info-pane' style='left:{x}px;top:{y}px'><div class='tag-header clearfix'><div class='tag-title'><a href='//www.bilibili.com/tag/{tag_id}/?pagetype=videopage' target='_blank'>{tag_name}</a></div><a class='btn-sub btn-subscribe'>+ 关注</a><a class='btn-sub btn-unsubscribe'>已关注</a></div><div class='btn-right-box'><a class='btn-crown'><i></i>顶 <span>{likesd}</span></a><a class='btn-tread'><i></i>踩 <span>{hatesd}</span></a></div><div class='text'>{content}</div><div class='tag-footer clearfix'><div class='btn-left-box'><a class='btn-close'>删除</a><a class='btn-report'>举报</a></div></div></div>",domDelPopup:"<div class='tag-del-popup'><p>确定要删除该标签吗？</p><a class='btn-ok'>确定</a><a class='btn-no'>取消</a></div>",domReportPopup:"<div class='tag-report-popup'><h3>请输入举报理由</h3><ul><li data-type='内容不相关'><i></i>内容不相关</li><li data-type='敏感信息'><i></i>敏感信息</li><li data-type='恶意攻击'><i></i>恶意攻击</li><li data-type='剧透内容'><i></i>剧透内容</li></ul><a class='btn-ok'>确定</a><a class='btn-close'></a></div>",show:function(t){this.remove(),t.likesd=this.yw(t.likes),t.hatesd=this.yw(t.hates),0===t.likes&&(t.likesd=""),0===t.hates&&(t.hatesd=""),this.panel=$(Rt(this.domBox,t)).css({display:"none"}),this.setState(t),this.bindUI(),this.panel.appendTo("body").fadeIn()},yw:function(t){return t>=1e8?parseFloat(t/1e8).toFixed(1)+"亿":t>=1e4?parseFloat(t/1e4).toFixed(1)+"万":t},setState:function(t){if(this.panel.find(".text").text()||this.panel.find(".text").remove(),this.switchSubscribeState(t.is_atten),UserStatus.isLogin()){if(Wt.isUp())return;(UserStatus.level()<Xt||Yt.tagList[Yt.currentIndex].attribute)&&this.panel.find(".btn-close").addClass("the-grey")}if(UserStatus.isLogin()){if(Wt.isUp())return;UserStatus.level()<zt&&(this.panel.find(".btn-report").addClass("the-grey"),this.panel.find(".btn-crown").addClass("the-grey"),this.panel.find(".btn-tread").addClass("the-grey"))}},bindUI:function(){var t=this;this.panel.find(".btn-subscribe").off("click").on("click",function(){var i=this,e=Yt.currentIndex;Wt.todo(function(){$.ajax({url:Ft+Qt.subscribe,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},data:{tag_id:Yt.tagList[Yt.currentIndex].tag_id,jsonp:"jsonp"},success:function(a){0===a.code?(t.switchSubscribeState(!0),Yt.tagList[e].is_atten=1):R({el:$(i),msg:a.message,cd:Yt.msgTime,type:"error"})}})})}),this.panel.find(".btn-unsubscribe").off("click").on("click",function(){var i=this,e=Yt.currentIndex;Wt.todo(function(){$.ajax({url:Ft+Qt.unsubscribe,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},data:{tag_id:Yt.tagList[Yt.currentIndex].tag_id,jsonp:"jsonp"},success:function(a){0===a.code?(t.switchSubscribeState(!1),Yt.tagList[e].is_atten=0):R({el:$(i),msg:a.message,cd:Yt.msgTime,type:"error"})}})})}),this.panel.find(".btn-unsubscribe").off("mouseover,mouseout").on({mouseover:function(){$(this).text("取消关注")},mouseout:function(){$(this).text("已关注")}}),this.panel.find(".btn-close").off("click").on("click",function(){Yt.currentIndex;var i=$(this).offset().left-60,e=$(this).offset().top-115;Wt.del(function(){t.showDelPopup(i,e)},$(this))}),this.panel.off("mouseleave").on("mouseleave",function(i){t.isRemove||(t.remove(),Yt.isOver=!1)}),this.panel.off("mouseenter").on("mouseenter",function(t){Yt.isOver=!0}),this.panel.find(".btn-report").off("click").on("click",function(){var i=ti.getCurrentTag().offset().left,e=ti.getCurrentTag().offset().top+28;Wt.report(function(){t.showReportPopup(i,e)},$(this))}),this.panel.find(".btn-crown").off("click").on("click",function(){var i=this,e=Yt.currentIndex,a=$(this).find("span");Number(a.text());Wt.topOrTread(function(){$.ajax({url:Ft+Qt.like,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},data:{tag_id:Yt.tagList[Yt.currentIndex].tag_id,aid:Gt.aid,jsonp:"jsonp"},success:function(n){0===n.code?(1==Yt.tagList[e].liked?(Yt.tagList[e].likes=Yt.tagList[e].likes-1,Yt.tagList[e].liked=0):(Yt.tagList[e].likes=Yt.tagList[e].likes+1,Yt.tagList[e].liked=1),Yt.tagList[e].likesd=t.yw(Yt.tagList[e].likes),a.text(Yt.tagList[e].likesd?Yt.tagList[e].likesd:""),Kt.show($(i),1,Yt.tagList[e].liked),1===Yt.tagList[e].hated&&(Yt.tagList[e].hates=Yt.tagList[e].hates-1,Yt.tagList[e].hatesd=t.yw(Yt.tagList[e].hates)?t.yw(Yt.tagList[e].hates):"",$(t.panel.find(".btn-tread span")).text(Yt.tagList[e].hatesd),Kt.show($(t.panel.find(".btn-tread")),1,!1),Yt.tagList[e].hated=0)):R({el:$(i),msg:n.message,cd:Yt.msgTime,type:"error"})}})},$(this))}),this.panel.find(".btn-tread").off("click").on("click",function(){var i=this,e=Yt.currentIndex,a=$(this).find("span");Number(a.text());Wt.topOrTread(function(){$.ajax({url:Ft+Qt.hate,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},data:{tag_id:Yt.tagList[Yt.currentIndex].tag_id,aid:Gt.aid,jsonp:"jsonp"},success:function(n){0===n.code?(1==Yt.tagList[e].hated?(Yt.tagList[e].hates=Yt.tagList[e].hates-1,Yt.tagList[e].hated=0):(Yt.tagList[e].hates=Yt.tagList[e].hates+1,Yt.tagList[e].hated=1),Yt.tagList[e].hatesd=t.yw(Yt.tagList[e].hates),a.text(Yt.tagList[e].hatesd?Yt.tagList[e].hatesd:""),Kt.show($(i),1,Yt.tagList[e].hated),1===Yt.tagList[e].liked&&(Yt.tagList[e].likes=Yt.tagList[e].likes-1,Yt.tagList[e].likesd=t.yw(Yt.tagList[e].likes)?t.yw(Yt.tagList[e].likes):"",$(t.panel.find(".btn-crown span")).text(Yt.tagList[e].likesd),Kt.show($(t.panel.find(".btn-crown")),1,!1),Yt.tagList[e].liked=0)):R({el:$(i),msg:n.message,cd:Yt.msgTime,type:"error"})}})},$(this))})},switchSubscribeState:function(t){t?(this.panel.find(".btn-subscribe").hide(),this.panel.find(".btn-unsubscribe").show()):(this.panel.find(".btn-subscribe").show(),this.panel.find(".btn-unsubscribe").hide())},showDelPopup:function(t,i){var e=this;this.delPanel=$(this.domDelPopup),this.delPanel.css({left:t,top:i}),$("body").append(this.delPanel),Yt.isOpenInfo=!0,this.delPanel.find(".btn-ok").off("click").on("click",function(){var t=this;$.ajax({url:Ft+Qt.del,type:"POST",dataType:"json",data:{aid:Gt.aid,tag_id:Yt.tagList[Yt.currentIndex].tag_id,jsonp:"jsonp"},xhrFields:{withCredentials:!0},success:function(i){0===i.code?(e.isRemove=!1,e.delPanel.remove(),e.remove(),ti.delTag()):R({el:$(t),msg:i.message,cd:Yt.msgTime,type:"error"})}})}),this.delPanel.find(".btn-no").off("click").on("click",function(t){e.isRemove=!1,e.delPanel.remove(),Yt.isOpenInfo=!1}),this.isRemove=!0},showReportPopup:function(t,i){var e=this;this.state.reportType=null,this.reportPanel=$(this.domReportPopup),this.reportPanel.css({left:t,top:i}),$("body").append(this.reportPanel),Yt.isOpenInfo=!0,this.reportPanel.find("li").off("click").on("click",function(){$(this).addClass("on").siblings("li").removeClass("on"),e.state.reportType=$(this).attr("data-type")}),this.reportPanel.find(".btn-ok").off("click").on("click",function(){var t=this;e.state.reportType?$.ajax({url:Ft+Qt.report,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},data:{aid:Gt.aid,tag_id:Yt.tagList[Yt.currentIndex].tag_id,reason:e.state.reportType,jsonp:"jsonp"},success:function(i){0===i.code?(e.reportPanel.find(".btn-close").click(),R({el:ti.getCurrentTag(),msg:"已提交举报",cd:Yt.msgTime})):R({el:$(t),msg:i.message,cd:Yt.msgTime,type:"error"})}}):R({el:$(t),msg:"请选择举报原因",cd:Yt.msgTime})}),this.reportPanel.find(".btn-close").off("click").on("click",function(){e.reportPanel.remove(),Yt.isOpenInfo=!1}),this.remove()},remove:function(){this.panel&&this.panel.animate({opacity:0},function(){$(this).remove()})}},Kt={show:function(t,i,e){var a=$("<div class='tag-praise'><div>"),n=$(t).offset().left,s=$(t).offset().top,o=e?"+"+i:"-"+i,l=e?"plus":"reduce";a.css({display:"block",left:n,top:s}).addClass(l).text(o).appendTo("body"),a.animate({top:s-18},function(){a.fadeOut(function(){a.remove()})})}},ti={container:"",domUl:$("<ul class='tag-area clearfix'></ul>"),domNothing:$("<div class='nothing'>快来成为第一个添加标签的人吧~</div>"),domBtnAdd:$("<a class='btn-add'><span class='one'></span><span class='two'></span></a>"),domIpt:$("<div class='ipt'><input type='text' placeholder='按回车键完成输入'><a class='btn-close'></a><div class='tips'>标签字数超出限制</div></div>"),domLink:$("<div class='btn-view-tag'><a class='btn-view-mod' href='#' target='_blank'>查看标签修改记录</a><span>|</span><a class='btn-view-user' href='#' target='_blank'>查看标签使用说明</a></div>"),state:{isInput:!1,currentTag:null,isFirst:!1},createTagList:function(){this.clearTagList();for(var t=Yt.tagList.length,i=0;i<t;i++){var e=Yt.tagList[i],a=$("<li class='tag' data-index='"+i+"'><a href='//search.bilibili.com/all?keyword="+encodeURIComponent(e.tag_name)+"&from_source=video_tag' target='_blank'>"+e.tag_name+"</a></li>");0===i&&this.state.isFirst&&a.hide().fadeIn(),a.prependTo(this.domUl)}this.domLink.show(),this.domNothing.hide()},clearTagList:function(){this.domUl.find(".tag").remove(),Yt.isOpenInfo=!1},loadTagListData:function(){var t=this;$.ajax({url:Ft+Qt.tags,type:"GET",dataType:"jsonp",data:{aid:Gt.aid,jsonp:"jsonp"},xhrFields:{withCredentials:!0},success:function(i){0===i.code&&(Yt.tagList=i.data||[],Yt.tagList.reverse(),t.createTagList(),t.state.isFirst=!0,t.domLink.show(),t.domNothing.hide()),i.code}})},hasTag:function(t){for(var i=0;i<Yt.tagList.length;i++)if(Yt.tagList[i].tag_name===t)return!1;return!0},addTag:function(){var t=this,i=this.domIpt.find("input"),e=$.trim(i.val());if(e.length>20)return!1;e&&Bt(e)?this.hasTag(e)?$.ajax({url:Ft+Qt.add,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},data:{aid:Gt.aid,tag_name:e,jsonp:"jsonp"},success:function(a){0===a.code?(t.switchInputState(),Yt.tagList.unshift({tag_id:a.tid,tag_name:e,cover:"",content:"",likes:0,hates:0,is_atten:0,attribute:0,type:0,ctime:0,state:0,count:{view:0,use:0,atten:0}}),t.createTagList(),t.tagEventBind()):R({el:i,msg:a.message,cd:Yt.msgTime,type:"error"})}}):R({el:i,msg:"该标签已存在",cd:Yt.msgTime,type:"error"}):R({el:i,msg:"输入内容为空或含非法字符",cd:Yt.msgTime,type:"error"})},domRender:function(){this.container.find(".tag-list").remove(),this.setLogUrl(),this.domUl.prependTo(this.container),this.domLink.appendTo(this.container),this.domNothing.prependTo(this.domUl),this.domBtnAdd.appendTo(this.domUl),this.domIpt.appendTo(this.domUl),this.bindUI()},setLogUrl:function(){var t=document.title;this.domLink.find(".btn-view-mod").attr("href","//www.bilibili.com/taglog#aid="+Gt.aid+"&title="+encodeURI(t)),this.domLink.find(".btn-view-user").attr("href","//www.bilibili.com/html/help.html#s")},bindUI:function(){var t=this;this.domBtnAdd.off("click").click(function(i){Wt.add(function(){Yt.isOpenInfo||t.switchInputState()},$(this)),i.stopPropagation()}),this.domIpt.find(".btn-close").off("click").click(function(){t.switchInputState()}),this.domIpt.off("click,input").on("click","input",function(t){t.stopPropagation()}).on("input","input",function(i){$(this).val().length>20?t.domIpt.find(".tips").show():t.domIpt.find(".tips").hide()}),$(document).off("keydown").on("keydown",function(i){13===i.keyCode&&t.state.isInput&&t.addTag()}),$(document).off("click").on("click",function(i){t.state.isInput&&t.switchInputState()}),this.tagEventBind()},tagEventBind:function(){var t=this;this.domUl.off("mouseenter").on("mouseenter",".tag",function(){if(!Yt.isOpenInfo){Yt.isOver=!0,$(this)[0].isOver=!0;var i=$(this);setTimeout(function(){if(i[0].isOver){var e=i.attr("data-index");Yt.currentIndex=e,t.state.currentTag=i,Yt.tagList[e].x=i.offset().left,Yt.tagList[e].y=i.offset().top+i.height()+6,Yt.tagList[e].index=e,Zt.show(Yt.tagList[e])}},300)}}),this.domUl.off("mouseleave").on("mouseleave",".tag",function(t){Yt.isOpenInfo||(Yt.isOver=!1,$(this)[0].isOver=!1,setTimeout(function(){Yt.isOver||Zt.remove()},300))})},switchInputState:function(){var t=this;this.state.isInput=!this.state.isInput,this.state.isInput?(this.domBtnAdd.hide(),this.domIpt.css({display:"block"}).animate({opacity:1,width:158})):(this.domIpt.find("input").val(""),this.domIpt.animate({width:23},function(){$(this).css({display:"none"}),t.domBtnAdd.fadeIn(100)}),this.domIpt.find(".tips").hide())},delTag:function(t){var i=this;this.domUl.find(".tag[data-index="+Yt.currentIndex+"]").fadeOut(500,function(){Yt.tagList.splice(Yt.currentIndex,1),Yt.isOpenInfo=!1,i.state.isFirst=!1,i.createTagList(),i.tagEventBind(),Yt.tagList.length>0?(i.domLink.show(),i.domNothing.hide()):(i.domNothing.show(),i.domLink.hide())})},getCurrentTag:function(){return this.state.currentTag},init:function(t,i,e){Gt.uid=i,Gt.mid=e,Gt.aid=t,this.container=$(".video-tag-box"),this.container.html(""),this.domRender(),this.loadTagListData()}},ii=ti;function ei(t){$(t.el);var i=t.buttonMode||1,e=t.onSubmit||null,a=t.onClose||null,n=t.onCancel||null,s=t.submitText||"确认",o=t.cancelText||"取消",l=['<div class="bili-dialog">','<div class="con">',t.title?"<header>"+t.title+'<i class="btn-close"></i></header>':"",'<div class="txt">'+t.text+"</div>",'<div class="btn-box">','<span class="bi-btn btn-submit">'+s+"</span>",'<span class="bi-btn btn-cancel">'+o+"</span>","</div>","</div>","</div>"].join("");$(".bili-dialog").length>0&&$(".bili-dialog").remove();var r=$(l);r.appendTo("body");var c=r.find(".con");r.css({height:$(document).height()}),c.css({marginTop:-c.height()/2}),r.off("click.bili-dialog-submit").on("click.bili-dialog-submit",".btn-submit",function(){e&&e(),$(".bili-dialog").remove()}),2===i&&r.off("click.bili-dialog-cancel").on("click.bili-dialog-cancel",".btn-cancel",function(){n&&n(),$(".bili-dialog").remove()}),r.off("click.bili-dialog-close").on("click.bili-dialog-close",".btn-close",function(){a&&a(),$(".bili-dialog").remove()})}var ai={methods:{getvip:function(){var t=this;$.getScript("//static.hdslb.com/vip/dist/js/vipPlugin.v2.js",function(){t.$emit("close");new vipPopup({appid:1,subid:1,type:2,check:1,fromtitle:"",fromid:""},function(){window.location.reload()})})}}},ni=(e(114),Object(v.a)(ai,function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"bili-dialog-m"},[e("div",{staticClass:"bili-dialog-bomb"},[e("div",{staticClass:"q1080p"},[e("i",{staticClass:"icon close-1080p",on:{click:function(i){return t.$emit("close")}}}),e("p",{staticClass:"title"},[t._v("成为大会员")]),e("p",{staticClass:"sub-title"},[t._v("即可解锁本片所有清晰度")]),t._m(0),e("div",{staticClass:"btns"},[e("a",{staticClass:"btn-getvip",on:{click:t.getvip}},[t._v("成为大会员")])])])]),e("iframe",{staticClass:"layout",attrs:{frameborder:"0"}})])},[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"pic"},[i("img",{attrs:{src:"//static.hdslb.com/images/2233_1080p.png",alt:"2233_1080p"}})])}],!1,null,null,null).exports),si=[{name:"首页",route:"/",tid:"",locid:23,sub:[]},{name:"动画",route:"douga",tid:1,locid:52,count:"",subMenuSize:162,slider:{width:620,height:220},viewTag:!1,customComponent:{name:"Energy",titleId:2507,leftId:2452,rightId:2453},sub:[{name:"MAD·AMV",route:"mad",tid:24,ps:15,rps:10,ad:{active:!0,dataLocId:151},desc:"具有一定制作程度的动画或静画的二次创作视频",url:"//www.bilibili.com/video/douga-mad-1.html"},{name:"MMD·3D",route:"mmd",tid:25,ps:15,rps:10,ad:{active:!0,dataLocId:152},desc:"使用MMD（MikuMikuDance）和其他3D建模类软件制作的视频",url:"//www.bilibili.com/video/douga-mmd-1.html"},{name:"短片·手书·配音",route:"voice",tid:47,ps:15,rps:10,desc:"追求创新并具有强烈特色的短片、手书（绘）及ACG相关配音",url:"//www.bilibili.com/video/douga-voice-1.html"},{name:"特摄",route:"tokusatsu",tid:86,ps:15,rps:10,desc:"特摄相关衍生视频",url:"//www.bilibili.com/video/cinephile-tokusatsu.html"},{name:"综合",route:"other",tid:27,ps:15,rps:10,ad:{active:!0,dataLocId:153},desc:"以动画及动画相关内容为素材，包括但不仅限于音频替换、杂谈、排行榜等内容",url:"//www.bilibili.com/video/douga-else-1.html"}]},{name:"番剧",route:"anime",tid:13,url:"//www.bilibili.com/anime/",takeOvered:!0,count:"",subMenuSize:172,combination:!0,sub:[{name:"连载动画",tid:33,route:"serial",desc:"当季连载的动画番剧",url:"//www.bilibili.com/video/bangumi-two-1.html"},{name:"完结动画",tid:32,route:"finish",desc:"已完结的动画番剧合集",url:"//www.bilibili.com/video/part-twoelement-1.html"},{name:"资讯",tid:51,route:"information",desc:"动画番剧相关资讯视频",url:"//www.bilibili.com/video/douga-else-information-1.html"},{name:"官方延伸",tid:152,route:"offical",desc:"动画番剧为主题的宣传节目、采访视频，及声优相关视频",url:"//www.bilibili.com/video/bagumi_offical_1.html"},{name:"新番时间表",url:"//www.bilibili.com/anime/timeline/",desc:""},{name:"番剧索引",url:"//www.bilibili.com/anime/index/",desc:""}]},{name:"国创",tid:167,route:"guochuang",url:"//www.bilibili.com/guochuang/",takeOvered:!0,count:"",subMenuSize:214,combination:!0,sub:[{name:"国产动画",tid:153,route:"chinese",desc:"我国出品的PGC动画",url:"//www.bilibili.com/video/bangumi_chinese_1.html"},{name:"国产原创相关",tid:168,route:"original",desc:"",url:"//www.bilibili.com/video/guochuang-fanvid-1.html"},{name:"布袋戏",tid:169,route:"puppetry",desc:"",url:"//www.bilibili.com/video/glove-puppetry-1.html"},{name:"动态漫·广播剧",tid:195,route:"motioncomic",desc:"",url:""},{name:"资讯",tid:170,route:"information",desc:"",url:"//www.bilibili.com/video/guochuang-offical-1.html"},{name:"新番时间表",url:"//www.bilibili.com/guochuang/timeline/",desc:""},{name:"国产动画索引",url:"//www.bilibili.com/guochuang/index/",desc:""}]},{name:"音乐",route:"music",tid:3,locid:58,count:"",subMenuSize:268,slider:{width:620,height:220},viewTag:!0,customComponent:{name:"Energy",titleId:2511,leftId:2462,rightId:3131,rightType:"slide"},sub:[{name:"原创音乐",route:"original",tid:28,ps:15,rps:10,viewHotTag:!0,ad:{active:!0,dataLocId:243},dpConfig:[{name:"一日",value:1},{name:"三日",value:3}],desc:"个人或团队制作以音乐为主要原创因素的歌曲或纯音乐",url:"//www.bilibili.com/video/music-original-1.html"},{name:"翻唱",route:"cover",tid:31,ps:15,rps:10,ad:{active:!0,dataLocId:245},viewHotTag:!0,dpConfig:[{name:"一日",value:1},{name:"三日",value:3}],desc:"一切非官方的人声再演绎歌曲作品",url:"//www.bilibili.com/video/music-Cover-1.html"},{name:"VOCALOID·UTAU",route:"vocaloid",tid:30,ps:15,rps:10,viewHotTag:!0,dpConfig:[{name:"一日",value:1},{name:"三日",value:3}],desc:"以雅马哈Vocaloid和UTAU引擎为基础，包含其他调教引擎，运用各类音源进行的歌曲创作内容",url:"//www.bilibili.com/video/music-vocaloid-1.html"},{name:"电音",route:"electronic",tid:194,ps:15,rps:10,viewHotTag:!0,dpConfig:[{name:"一日",value:1},{name:"三日",value:3}],desc:"以电子合成器、音乐软体等产生的电子声响制作的音乐",url:"#"},{name:"演奏",route:"perform",tid:59,ps:15,rps:10,ad:{active:!0,dataLocId:247},viewHotTag:!0,dpConfig:[{name:"一日",value:1},{name:"三日",value:3}],desc:"传统或非传统乐器及器材的演奏作品",url:"//www.bilibili.com/video/music-perform-1.html"},{name:"MV",route:"mv",tid:193,ps:15,rps:10,viewHotTag:!0,dpConfig:[{name:"一日",value:1},{name:"三日",value:3}],desc:"音乐录影带，为搭配音乐而拍摄的短片",url:"//www.bilibili.com/video/music-coordinate-1.html"},{name:"音乐现场",route:"live",tid:29,ps:15,rps:10,viewHotTag:!0,dpConfig:[{name:"一日",value:1},{name:"三日",value:3}],desc:"音乐实况表演视频",url:"//www.bilibili.com/video/music-oped-1.html"},{name:"音乐综合",route:"other",tid:130,ps:15,rps:10,viewHotTag:!0,dpConfig:[{name:"一日",value:1},{name:"三日",value:3}],desc:"收录无法定义到其他音乐子分区的音乐视频",url:"//www.bilibili.com/video/music-collection-1.html"},{name:"音频",customZone:"Audio",route:"audio",url:"//www.bilibili.com/audio/home?musicType=music"}]},{name:"舞蹈",route:"dance",tid:129,locid:64,count:"",subMenuSize:172,slider:{width:620,height:220},viewTag:!1,customComponent:{name:"Energy",titleId:2513,leftId:2472,rightId:2473},sub:[{name:"宅舞",route:"otaku",tid:20,ps:15,rps:10,ad:{active:!0,dataLocId:249},desc:"与ACG相关的翻跳、原创舞蹈",url:"//www.bilibili.com/video/dance-1.html"},{name:"街舞",route:"hiphop",tid:198,ps:15,rps:10,ad:{active:!0,dataLocId:251},desc:"收录街舞相关内容，包括赛事现场、舞室作品、个人翻跳、FREESTYLE等",url:""},{name:"明星舞蹈",route:"star",tid:199,ps:15,rps:10,desc:"国内外明星发布的官方舞蹈及其翻跳内容",url:""},{name:"中国舞",route:"china",tid:200,ps:15,rps:10,ad:{active:!0,dataLocId:253},desc:"传承中国艺术文化的舞蹈内容，包括古典舞、民族民间舞、汉唐舞、古风舞等",url:""},{name:"舞蹈综合",route:"three_d",tid:154,ps:15,rps:10,desc:"收录无法定义到其他舞蹈子分区的舞蹈视频",url:""},{name:"舞蹈教程",route:"demo",tid:156,ps:10,rps:6,desc:"镜面慢速，动作分解，基础教程等具有教学意义的舞蹈视频",url:"//www.bilibili.com/video/dance-demo-1.html"}]},{name:"游戏",route:"game",tid:4,locid:70,count:"",subMenuSize:240,slider:{width:470,height:216},viewTag:!0,customComponent:{name:"Promote",id:4},recommendCardType:"GameGroomBox",sub:[{name:"单机游戏",route:"stand_alone",tid:17,ps:10,rps:7,rankshow:1,viewHotTag:!0,ad:{active:!0,dataLocId:255},dpConfig:[{name:"三日",value:3},{name:"一日",value:1},{name:"一周",value:7}],desc:"以所有平台（PC、主机、移动端）的单机或联机游戏为主的视频内容，包括游戏预告、CG、实况解说及相关的评测、杂谈与视频剪辑等",url:"//www.bilibili.com/video/videogame-1.html"},{name:"电子竞技",route:"esports",tid:171,ps:10,rps:7,rankshow:1,viewHotTag:!0,ad:{active:!0,dataLocId:257},desc:"具有高对抗性的电子竞技游戏项目，其相关的赛事、实况、攻略、解说、短剧等视频。",url:"//www.bilibili.com/video/esports-1.html"},{name:"手机游戏",route:"mobile",tid:172,ps:10,rps:7,rankshow:1,viewHotTag:!0,desc:"以手机及平板设备为主要平台的游戏，其相关的实况、攻略、解说、短剧、演示等视频。",url:"//www.bilibili.com/video/mobilegame-1.html"},{name:"网络游戏",route:"online",tid:65,ps:10,rps:7,rankshow:1,viewHotTag:!0,ad:{active:!0,dataLocId:259},dpConfig:[{name:"三日",value:3},{name:"一日",value:1},{name:"一周",value:7}],desc:"由网络运营商运营的多人在线游戏，以及电子竞技的相关游戏内容。包括赛事、攻略、实况、解说等相关视频",url:"//www.bilibili.com/video/onlinegame-1.html"},{name:"桌游棋牌",route:"board",tid:173,ps:5,rps:3,rankshow:1,viewHotTag:!0,desc:"桌游、棋牌、卡牌对战等及其相关电子版游戏的实况、攻略、解说、演示等视频。",url:"//www.bilibili.com/video/boardgame-1.html"},{name:"GMV",route:"gmv",tid:121,ps:5,rps:3,rankshow:1,viewHotTag:!0,dpConfig:[{name:"三日",value:3},{name:"一日",value:1},{name:"一周",value:7}],desc:"由游戏素材制作的MV视频。以游戏内容或CG为主制作的，具有一定创作程度的MV类型的视频",url:"//www.bilibili.com/video/gmv-1.html"},{name:"音游",route:"music",tid:136,ps:5,rps:3,rankshow:1,viewHotTag:!0,dpConfig:[{name:"三日",value:3},{name:"一日",value:1},{name:"一周",value:7}],desc:"各个平台上，通过配合音乐与节奏而进行的音乐类游戏视频",url:"//www.bilibili.com/video/music-game-1.html"},{name:"Mugen",route:"mugen",tid:19,ps:5,rps:3,rankshow:1,viewHotTag:!0,dpConfig:[{name:"三日",value:3},{name:"一日",value:1},{name:"一周",value:7}],desc:"以Mugen引擎为平台制作、或与Mugen相关的游戏视频",url:"//www.bilibili.com/video/game-mugen-1.html"},{name:"游戏赛事",url:"//www.bilibili.com/v/game/match/",newIcon:!0}]},{name:"科技",route:"technology",tid:36,locid:76,count:"",subMenuSize:172,slider:{width:620,height:220},viewTag:!1,customComponent:{name:"Energy",titleId:2058,leftId:2047,rightId:2048},sub:[{name:"趣味科普人文",route:"fun",tid:124,ps:15,rps:10,ad:{active:!0,dataLocId:261},desc:"含有科普或人文性质的视频",url:"//www.bilibili.com/video/tech-fun-1.html"},{name:"野生技术协会",route:"wild",tid:122,ps:15,rps:10,ad:{active:!0,dataLocId:263},desc:"展示一定改装/创作能力的视频",url:"//www.bilibili.com/video/tech-wild-1.html"},{name:"演讲·公开课",route:"speech_course",tid:39,ps:15,rps:10,desc:"演讲、教育课程相关的视频",url:"//www.bilibili.com/video/speech-course-1.html"},{name:"星海",route:"military",tid:96,ps:15,rps:10,ad:{active:!0,dataLocId:265},desc:"军事相关视频",url:"//www.bilibili.com/video/tech-future-military-1.html"},{name:"机械",route:"mechanical",tid:98,ps:15,rps:10,desc:"机械设备展示或制作视频",url:"//www.bilibili.com/video/tech-future-other-1.html"},{name:"汽车",route:"automobile",tid:176,ps:15,rps:10,desc:"汽车、摩托车、公交车以及竞赛用车等轮式交通工具相",url:"//www.bilibili.com/video/tech-future-automobile-1.html"}]},{name:"数码",route:"digital",tid:188,locid:2977,count:"",subMenuSize:80,slider:{width:470,height:216},viewTag:!0,customComponent:{name:"Energy",titleId:2980,leftId:2978,rightId:2979},recommendCardType:"GameGroomBox",sub:[{name:"手机平板",route:"mobile",tid:95,ps:15,rps:10,viewHotTag:!0,desc:"手机平板设备相关视频",url:"#"},{name:"电脑装机",route:"pc",tid:189,ps:15,rps:10,viewHotTag:!0,desc:"电脑装机及配件等相关视频",url:"#"},{name:"摄影摄像",route:"photography",tid:190,ps:15,rps:10,viewHotTag:!0,desc:"摄影摄像器材等相关视频",url:"#"},{name:"影音智能",route:"intelligence_av",tid:191,ps:15,rps:10,viewHotTag:!0,desc:"影音设备、智能产品等相关视频",url:"#"}]},{name:"生活",route:"life",tid:160,locid:88,count:"",subMenuSize:124,slider:{width:620,height:220},viewTag:!1,customComponent:{name:"Energy",titleId:2062,leftId:1674,rightId:1670},sub:[{name:"搞笑",route:"funny",tid:138,ps:15,rps:10,ad:{active:!0,dataLocId:273},desc:"搞笑的、轻松有趣的、具有独特笑点或娱乐精神的视频",url:"//www.bilibili.com/video/ent_funny_1.html"},{name:"日常",route:"daily",tid:21,ps:15,rps:10,ad:{active:!0,dataLocId:275},desc:"漫展、cosplay、体育运动及其他一般日常向视频",url:"//www.bilibili.com/video/ent-life-1.html"},{name:"美食圈",route:"food",tid:76,ps:15,rps:10,desc:"美食鉴赏&料理制作教程",url:"//www.bilibili.com/video/ent-food-1.html"},{name:"动物圈",route:"animal",tid:75,ps:15,rps:10,ad:{active:!0,dataLocId:277},desc:"这里有各种萌萌哒动物哦~",url:"//www.bilibili.com/video/ent-animal-1.html"},{name:"手工",route:"handmake",tid:161,ps:15,rps:10,desc:"简易手工艺品的diy制作视频，例如；折纸、手账、橡皮章等",url:"//www.bilibili.com/video/ent-handmake-1.html"},{name:"绘画",route:"painting",tid:162,ps:15,rps:10,desc:"绘画爱好者们关于绘画技巧、绘图过程的分享交流场所",url:"//www.bilibili.com/video/ent-painting-1.html"},{name:"运动",route:"sports",tid:163,ps:15,rps:10,desc:"一般向运动项目以及惊险刺激的户外极限运动",url:"//www.bilibili.com/video/ent-sports-1.html"},{name:"其他",route:"other",tid:174,ps:15,rps:10,desc:"对于分区归属不明的视频进行归纳整合的特定分区。",url:"//www.bilibili.com/video/others-1.html"}]},{name:"鬼畜",route:"kichiku",tid:119,locid:100,count:"",subMenuSize:118,slider:{width:620,height:220},viewTag:!1,customComponent:{name:"Energy",titleId:2509,leftId:2482,rightId:2483},sub:[{name:"鬼畜调教",route:"guide",tid:22,ps:15,rps:10,ad:{active:!0,dataLocId:285},desc:"使用素材在音频、画面上做一定处理，达到与BGM一定的同步感",url:"//www.bilibili.com/video/ent-Kichiku-1.html"},{name:"音MAD",route:"mad",tid:26,ps:15,rps:10,ad:{active:!0,dataLocId:287},desc:"使用素材音频进行一定的二次创作来达到还原原曲的非商业性质稿件",url:"//www.bilibili.com/video/douga-kichiku-1.html"},{name:"人力VOCALOID",route:"manual_vocaloid",tid:126,ps:15,rps:10,desc:"将人物或者角色的无伴奏素材进行人工调音，使其就像VOCALOID一样歌唱的技术",url:"//www.bilibili.com/video/kichiku-manual_vocaloid-1.html"},{name:"教程演示",route:"course",tid:127,ps:10,rps:6,rightComponent:{name:"CmImgList",id:148},ad:{active:!0,dataLocId:289},hideDropdown:!1,desc:"鬼畜相关的教程演示",url:"//www.bilibili.com/video/kichiku-course-1.html"}]},{name:"时尚",route:"fashion",tid:155,locid:94,count:"",subMenuSize:124,slider:{width:620,height:220},viewTag:!1,customComponent:{name:"Energy",titleId:2515,leftId:2492,rightId:2493},sub:[{name:"美妆",route:"makeup",tid:157,ps:15,rps:10,ad:{active:!0,dataLocId:279},desc:"涵盖妆容、发型、美甲等教程，彩妆、护肤相关产品测评、分享等",url:"//www.bilibili.com/video/fashion-makeup-fitness-1.html"},{name:"服饰",route:"clothing",tid:158,ps:15,rps:10,ad:{active:!0,dataLocId:281},desc:"服饰风格、搭配技巧相关的展示和教程视频",url:"//www.bilibili.com/video/fashion-clothing-1.html"},{name:"健身",route:"aerobics",tid:164,ps:15,rps:10,desc:"器械、有氧、拉伸运动等，以达到强身健体、减肥瘦身、形体塑造目的",url:"//www.bilibili.com/video/fashion-body-1.html"},{name:"T台",route:"catwalk",tid:159,ps:15,rps:10,desc:"发布会走秀现场及模特相关时尚片、采访、后台花絮",url:"#"},{name:"风尚标",route:"trends",tid:192,ps:15,rps:10,ad:{active:!0,dataLocId:283},desc:"时尚明星专访、街拍、时尚购物相关知识科普",url:"#"}]},{name:"广告",route:"ad",tid:165,locid:1466,count:"",hidePopover:!0,sub:[{name:"广告",route:"ad",tid:166,desc:""}],slider:{width:1160,height:332}},{name:"娱乐",route:"ent",tid:5,locid:82,count:"",subMenuSize:90,slider:{width:620,height:220},viewTag:!1,customComponent:{name:"Energy",titleId:2067,leftId:2065,rightId:2066},sub:[{name:"综艺",route:"variety",tid:71,ps:15,rps:10,ad:{active:!0,dataLocId:267},desc:"国内外有趣的综艺和综艺相关精彩剪辑",url:"//www.bilibili.com/video/ent-variety-1.html"},{name:"明星",route:"star",tid:137,ps:15,rps:10,ad:{active:!0,dataLocId:269},desc:"娱乐圈动态、明星资讯相关",url:"//www.bilibili.com/video/ent-circle-1.html"},{name:"Korea相关",route:"korea",tid:131,ps:15,rps:10,ad:{active:!0,dataLocId:271},desc:"Korea相关音乐、舞蹈、综艺等视频",url:"//www.bilibili.com/video/ent-korea-1.html"}]},{name:"影视",route:"cinephile",tid:181,locid:2211,count:"",subMenuSize:84,slider:{width:620,height:220},viewTag:!1,customComponent:{name:"Energy",titleId:2309,leftId:2307,rightId:2308},sub:[{name:"影视杂谈",route:"cinecism",tid:182,ps:15,rps:10,ad:{active:!0,dataLocId:2212},desc:"影视评论、解说、吐槽、科普等",url:"//www.bilibili.com/video/cinephile-cinecism.html"},{name:"影视剪辑",route:"montage",tid:183,ps:15,rps:10,ad:{active:!0,dataLocId:2213},desc:"对影视素材进行剪辑再创作的视频",url:"//www.bilibili.com/video/cinephile-montage.html"},{name:"短片",route:"shortfilm",tid:85,ps:15,rps:10,desc:"追求自我表达且具有特色的短片",url:"//www.bilibili.com/video/cinephile-shortfilm.html"},{name:"预告·资讯",route:"trailer_info",tid:184,ps:15,rps:10,ad:{active:!0,dataLocId:2214},desc:"影视类相关资讯，预告，花絮等视频",url:"//www.bilibili.com/video/cinephile-trailer-info.html"}]},{name:"纪录片",route:"documentary",tid:177,url:"//www.bilibili.com/documentary/",count:"",takeOvered:!0,hasParent:!0,combination:!0,sub:[{name:"人文·历史",tid:37,route:"history",dise:"",url:"//www.bilibili.com/video/doco-history.html"},{name:"科学·探索·自然",tid:178,route:"science",dise:"",url:"//www.bilibili.com/video/doco-science.html"},{name:"军事",tid:179,route:"military",dise:"",url:"//www.bilibili.com/video/doco-military.html"},{name:"社会·美食·旅行",tid:180,route:"travel",dise:"",url:"//www.bilibili.com/video/doco-travel.html"},{name:"纪录片索引",url:"//www.bilibili.com/documentary/index/"}]},{name:"电影",route:"movie",tid:23,url:"//www.bilibili.com/movie/",count:"",takeOvered:!0,hasParent:!0,combination:!0,sub:[{name:"华语电影",tid:147,route:"chinese",desc:"",url:"//www.bilibili.com/video/movie_chinese_1.html"},{name:"欧美电影",tid:145,route:"west",desc:"",url:"//www.bilibili.com/video/movie_west_1.html"},{name:"日本电影",tid:146,route:"japan",desc:"",url:"//www.bilibili.com/video/movie_japan_1.html"},{name:"其他国家",tid:83,route:"movie",desc:"",url:"//www.bilibili.com/video/movie-movie-1.html"},{name:"电影索引",url:"//www.bilibili.com/movie/index/"}]},{name:"电视剧",route:"tv",tid:11,url:"//www.bilibili.com/tv/",count:"",takeOvered:!0,hasParent:!0,combination:!0,sub:[{name:"国产剧",tid:185,route:"mainland",desc:"",url:"//www.bilibili.com/video/tv-mainland.html"},{name:"海外剧",tid:187,route:"overseas",desc:"",url:"//www.bilibili.com/video/tv-overseas.html"},{name:"电视剧索引",url:"//www.bilibili.com/tv/index/"}]}],oi={props:{show:{default:!1},aid:{}},methods:{onClose:function(){this.$emit("close")}},mounted:function(){var t=this;window.addEventListener("message",function(i){if("http://www.bilibili.com"===i.origin||"https://www.bilibili.com"===i.origin){if("close"!==i.data)return"alert-投诉成功"===i.data?(R({el:$("[name=appeal]")[0],msg:"投诉成功",cd:1e3}),void t.$emit("close")):void("string"!=typeof i.data||"alert-"!==i.data.substr(0,6)||R({el:$("[name=appeal]")[0],msg:i.data.substr(6),cd:1e3,type:"error"}));t.$emit("close")}})}},li=(e(115),Object(v.a)(oi,function(){var t=this.$createElement,i=this._self._c||t;return this.show?i("div",{staticClass:"bili-dialog-m"},[i("div",{staticClass:"bili-dialog-bomb"},[i("div",[i("iframe",{attrs:{name:"appeal",width:"600",height:"600",src:"//www.bilibili.com/appeal/?avid="+this.aid,frameborder:"0"}})])])]):this._e()},[],!1,null,null,null).exports),ri=new Pt({}),ci={components:{Abnormal:B,Appeal:li,VideoTopInfo:Y,VideoBox:et,VideoExInfo:_t,Coin:xt,Collection:$t,FixedNav:Mt,Q1080p:ni},data:function(){return{abnormalState:"loading",abnormalData:{},isLogin:!1,userInfo:{},uid:null,aid:null,bvid:null,mid:null,following:!1,coined:!1,coinNum:0,coinable:!0,collected:!1,isElec:!1,desc:{},reprint:0,shareData:{},liveStatus:{},upData:{},videoData:{},tbData:{title:"",share:0,fav:0,coin:0},videoList:{},elecRank:null,isNewRouter:!1,showAppeal:!1,show1080p:!1}},props:{inited:{default:!1}},computed:{av:function(){return this.$route.params.aid&&this.$route.params.aid.replace("av","")||""},bv:function(){return this.$route.params.aid},p:function(){return this.$route.params.cid&&this.$route.params.cid.replace("p","")||""},breadcrumb:function(){var t=si.length;if(!this.videoData.tid)return{};for(var i=0;i<t;i++)for(var e=si[i].sub.length,a=0;a<e;a++)if(this.videoData.tid===si[i].sub[a].tid)return{name:si[i].name,route:si[i].route,tid:si[i].tid,subName:si[i].sub[a].name,subRoute:si[i].sub[a].route,subTid:si[i].sub[a].tid};return{}}},created:function(){var t=this;t.isNewRouter=!0,window.onLoginInfoLoaded(function(i){if(/Android|webOS|iPhone|Windows Phone|iPod|BlackBerry/i.test(navigator.userAgent)&&(t.rec("watchlater_mobile"),t.$isbv?t.bv?window.location.href="//m.bilibili.com/video/"+t.bv+(t.p?"?p="+t.p:""):window.location.href="//m.bilibili.com":t.av?window.location.href="//m.bilibili.com/video/av"+t.av+(t.p?"?p="+t.p:""):window.location.href="//m.bilibili.com"),i.isLogin){var e=navigator.userAgent;/msie [\w.]+/.exec(e.toLowerCase())||/Trident/i.test(e)&&/Windows NT 6/.test(e)?(t.rec("watchlater_ielowversion"),t.abnormalState="browser"):(t.userInfo=i,t.isLogin=i.isLogin,t.uid=i.mid,t.getVideoList())}else{if(t.$isbv){if(t.rec("watchlater_redirect2av"),t.bv)return void(window.location.href="//www.bilibili.com/video/"+t.bv+(t.p?"?p="+t.p:""))}else if(t.av)return void(window.location.href="//www.bilibili.com/video/av"+t.av+(t.p?"?p="+t.p:""));t.rec("watchlater_login"),window.location.href="https://passport.bilibili.com/login"}})},mounted:function(){var t=this;q.$on("toggleFollowStatus",function(i){t.following=i}),q.$on("coined",function(i){t.coined=i.flag,t.coinNum=i.num||0}),q.$on("inFavouriteList",function(i){t.collected=i}),q.$on("coinable",function(i){t.coinable=i}),window.callAppointPart=function(i,e){t.getVideoInfo(e.aid,e.bvid),t.isNewRouter=!1,t.changeRouter(e.aid,e.cid,e.bvid),q.$emit("closeFav"),q.$emit("closeCoin")},window.showPay=function(i){ei({title:"跳转播放",text:'<p style="font-size:14px;">'+t.findInfo(i.aid,i.cid).title+'</p><p style="color:#999; margin-top:10px; font-size:14px;">付费稿件无法直接在本播放页播放</p>',buttonMode:2,cancelText:"&nbsp;&nbsp;&nbsp;&nbsp;取消&nbsp;&nbsp;&nbsp;&nbsp;",submitText:"跳转播放",onSubmit:function(){window.open("//www.bilibili.com/video/".concat(t.$isbv?i.bvid:"av"+i.aid))}})},window.showCoopModal=function(i){var e=t.findInfo(i.aid,i.cid),a=e.title,n=e.p;ei({title:"跳转播放",text:'<p style="font-size:14px;">'+a+'</p><p style="color:#999; margin-top:10px; font-size:14px;">合作稿件无法直接在本播放页播放</p>',buttonMode:2,cancelText:"&nbsp;&nbsp;&nbsp;&nbsp;取消&nbsp;&nbsp;&nbsp;&nbsp;",submitText:"跳转播放",onSubmit:function(){t.$isbv?window.open("//www.bilibili.com/video/"+i.bvid+(n?"?p="+n:"")):window.open("//www.bilibili.com/video/av"+i.aid+(n?"?p="+n:""))}})},window.show1080p=function(){t.show1080p=!0},this.getUserAttentionList()},beforeRouteUpdate:function(t,i,e){this.isNewRouter&&window.location.reload(),this.isNewRouter=!0,e()},methods:{getVideoList:function(){var t=this,i=this;F({url:"//api.bilibili.com/x/v2/history/toview/web",type:"GET",dataType:"jsonp",data:{jsonp:"jsonp"},timeout:5e3}).done(function(e){if(e&&0===e.code&&e.data){var a=e.data,n=null,s=null,o=null;if(a.list=a.list||[],i.videoList=a.list,i.av||i.bv){for(var l=!1,r=0;r<a.list.length;r++)if(parseInt(i.av)===parseInt(a.list[r].aid)||i.bv===a.list[r].bvid){var c=i.p||1,d=a.list[r].pages;if(d){var u=c>d.length?d.length:c;n=i.av,o=i.bv,s=d[u-1].cid}else n=i.av,o=i.bv,s=1;l=!0;break}if(!l)return i.rec("watchlater_notinlist"),i.abnormalState="notfind",void i.loadView(i.av,i.bv).done(function(t){t&&0===t.code&&t.data?i.abnormalData=t.data:i.rec("watchlater_notinlist_error")})}else{if(0===a.list.length)return i.rec("watchlater_listempty"),void(i.abnormalState="empty");n=a.list[0].aid,o=a.list[0].bvid,s=a.list[0].pages&&a.list[0].pages[0].cid||1}i.abnormalState="",t.$isbv?i.bv||(window.location.hash="#/"+o+"/p1"):i.av||(window.location.hash="#/av"+n+"/p1"),t.$nextTick(function(){if(window.EmbedPlayer){var t=i.$isbv?1:0;i.inited?window.GrayManager.reload("musth5=1&cid="+s+"&watchlater=true&playlist="+encodeURIComponent(JSON.stringify(e))+"&bvid="+o+"&aid="+n+"&show_bv="+t):(window.EmbedPlayer("player","//static.hdslb.com/play.swf","musth5=1&cid="+s+"&watchlater=true&auxiliary=1&playlist="+encodeURIComponent(JSON.stringify(e))+"&bvid="+o+"&aid="+n+"&show_bv="+t,"html5"),i.$emit("onInit"))}i.getVideoInfo(n,o)}),i.rec("watchlater_normalcase")}else i.rec("watchlater_listloadfailed"),i.abnormalState="fail"}).fail(function(t){i.rec("watchlater_listloadfailed"),i.abnormalState="fail"})},getVideoInfo:function(t,i){var e=this;this.loadView(t,i).done(function(i){if(i&&0===i.code&&i.data){var a=i.data;e.updateAll(a)}if(-403===i.code){var n=e.findInfo(parseInt(t));n.title;return e.abnormalState="403",e.abnormalData=n,void e.rec("watchlater_copyrightban")}if(0!==i.code){var s=e.findInfo(parseInt(t));s.title;return e.abnormalState="404",void(e.abnormalData=s)}}).fail(function(t){e.videoData={title:"视频信息获取失败，请稍后刷新页面重试…"}})},loadView:function(t,i){return F({url:"//api.bilibili.com/x/web-interface/view",type:"GET",dataType:"jsonp",data:this.$isbv?{jsonp:"jsonp",bvid:i}:{jsonp:"jsonp",aid:t},cache:!0,jsonpCallback:"cb_view"})},updateAll:function(t){var i=this;i.videoData=t,i.desc=t.desc,i.reprint=t.rights.no_reprint,i.aid=t.aid,i.bvid=t.bvid,i.mid=t.owner.mid,window.mid=t.owner.mid,i.shareData={url:"https://www.bilibili.com/video/".concat(this.$isbv?i.bvid:"av"+i.aid),title:t.title,desc:t.title+" UP主："+t.owner.name,summary:t.desc,shortTitle:t.title,pic:t.pic,weiboTag:"#哔哩哔哩动画#",aid:t.aid},i.tbData={title:t.title,share:t.stat.share,fav:t.stat.favorite,coin:t.stat.coin},document.title=t.title+"_bilibili_哔哩哔哩",i.upDateComponents()},upDateComponents:function(){var t=this;t.getUpInfo(),ri.reset(t.userInfo),t.upDateTag(),Ot.init(t.shareData),window.bbComment&&($(".comment").find("*").off(),$(".comment").off().html(""),$(".comment ~ .b-head .results").html(""),setTimeout(function(){new bbComment(".comment",t.aid,1,t.userInfo)},2e3))},getUpInfo:function(){var t=this;F({url:"//api.bilibili.com/x/web-interface/card",type:"GET",dataType:"jsonp",data:{jsonp:"jsonp",mid:t.mid,loginid:t.uid}}).done(function(i){i&&0===i.code&&i.data&&(t.following=i.data.following,t.upData=i.data.card,t.upData.archiveCount=i.data.archive_count,t.getChargeInfo())}).fail(function(t){})},getLiveStatus:function(){var t=this;F({url:"//api.live.bilibili.com/bili/living_v2/"+t.mid,type:"GET",jsonpCallback:"liveXhrDone"}).done(function(i){if(i){var e=new Function("return "+i)();0===e.code&&(t.liveStatus=e.data)}}).fail(function(t){})},upDateTag:function(){ii.init(this.aid,this.uid,this.mid)},getChargeInfo:function(){var t=this;F({url:"//api.bilibili.com/x/elec/show",dataType:"jsonp",data:{jsonp:"jsonp",aid:t.aid,nolist:!0}}).done(function(i){if(0===i.code){t.isElec=i.data&&i.data.show;var e={name:t.upData.name,avatar:x(t.upData.face,68,68),mid:t.upData.mid,aid:t.aid,show:i.data.show};window.ElecRank&&(t.elecRank?(t.elecRank.destroy(),t.elecRank.init(e)):t.elecRank=new window.ElecRank(".elec-rank-sec",e))}})},changeRouter:function(t,i,e){var a=this.findInfo(t,i);this.$isbv?window.location.hash="#/"+e+"/p"+a.p:window.location.hash="#/av"+t+"/p"+a.p},findInfo:function(t,i){for(var e={},a=0;a<this.videoList.length;a++)if(t===this.videoList[a].aid){if(e=this.videoList[a],i)if(this.videoList[a].pages){for(var n=0;n<this.videoList[a].pages.length;n++)if(i===this.videoList[a].pages[n].cid){e.p=n+1;break}}else e.p=1;break}return e},getUserAttentionList:function(){F({url:"//api.bilibili.com/x/web-interface/attentions",type:"GET",data:{jsonp:"jsonp"},xhrFields:{withCredentials:!0}}).done(function(t){window.AttentionList=[],0===t.code&&t.data&&t.data.length>0&&(window.AttentionList=t.data)})}}},di=Object(v.a)(ci,function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"view-later-module"},[t.abnormalState?e("abnormal",{staticClass:"bili-wrapper",attrs:{abnormalState:t.abnormalState,abnormalData:t.abnormalData}}):e("div",[e("video-top-info",{staticClass:"bili-wrapper",attrs:{videoData:t.videoData,breadcrumb:t.breadcrumb,upData:t.upData,liveStatus:t.liveStatus,isElec:t.isElec,following:t.following,coined:t.coined,coinNum:t.coinNum,coinable:t.coinable,collected:t.collected},on:{showAppeal:function(i){t.showAppeal=!0}}}),e("video-box",{attrs:{aid:t.aid,tbData:t.tbData,elec:t.isElec,coined:t.coined,coinNum:t.coinNum,coinable:t.coinable,collected:t.collected}}),e("video-ex-info",{staticClass:"bili-wrapper",attrs:{desc:t.desc,reprint:t.reprint,aid:t.aid}}),e("collection",{attrs:{aid:t.aid,collected:t.collected}}),e("coin",{attrs:{aid:t.aid,mid:t.mid,followed:t.following,copyright:t.videoData.copyright,coined:t.coined,coinNum:t.coinNum}}),e("fixed-nav"),e("Appeal",{attrs:{show:t.showAppeal,aid:t.aid},on:{close:function(i){t.showAppeal=!1}}}),t.show1080p?e("Q1080p",{on:{close:function(i){t.show1080p=!1}}}):t._e()],1)],1)},[],!1,null,null,null).exports,ui={props:{state:{default:"loading"},data:{default:[]},reload:{default:""}},computed:{source:function(){var t,i=Object.prototype.toString;return"[object Array]"===i.call(this.data)?0!=this.data.length:"[object Object]"===i.call(this.data)?(t=this.data,!("{}"===JSON.stringify(t))):void 0}},methods:{reloads:function(){this.reload&&lt.$emit(this.reload),this.$emit("reload")}}},mi=(e(116),{components:{BiliImg:E,Loading:Object(v.a)(ui,function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.source?t._e():e("div",{staticClass:"load-state"},["loading"===t.state?e("span",{staticClass:"loading"},[t._v("正在加载...")]):t._e(),"error"===t.state?e("span",{staticClass:"error"},[t._v("加载失败，"),e("a",{attrs:{href:"javascript:;"},on:{click:function(i){return t.reloads()}}},[t._v("点击重试")])]):t._e(),"loaded"===t.state?e("span",{staticClass:"empty"},[t._v("没有数据(-_-#)")]):t._e()])},[],!1,null,null,null).exports},data:function(){return{listData:[],userInfo:{},isLogin:!0,cd:3,state:"loading"}},computed:{looked:function(){for(var t=!1,i=0;i<this.listData.length;i++)if(this.listData[i].progress>=30||-1===this.listData[i].progress){t=!0;break}return t}},mounted:function(){var t=this;window.onLoginInfoLoaded(function(i){i.isLogin?(t.userInfo=i,t.isLogin=!0,t.getListData()):(t.isLogin=!1,setInterval(function(){t.cd--,0===t.cd&&(window.location.href="https://passport.bilibili.com/login")},1e3))},!0),lt.$on("reload-watchlater-data",function(){t.state="loading",t.getListData()})},methods:{getListData:function(){var t=this;$.ajax({url:"//api.bilibili.com/x/v2/history/toview/web",type:"GET",dataType:"jsonp",timeout:1e4,data:{jsonp:"jsonp"}}).done(function(i){if(i&&0===i.code&&i.data){var e=i.data.list||[];t.listData=e,t.state="loaded"}}).fail(function(i){t.state="error"})},delVideo:function(t,i){var e=this;F({url:"//api.bilibili.com/x/v2/history/toview/del",type:"POST",data:t?{jsonp:"jsonp",viewed:!0,csrf:y.get("bili_jct")}:{jsonp:"jsonp",aid:i,csrf:y.get("bili_jct")},xhrFields:{withCredentials:!0}},!0).done(function(a){if(a&&0===a.code)if(t){R({msg:"已成功移除已观看视频"});var n=e.listData.filter(function(t,i){return t.progress<30&&-1!=t.progress});e.listData=n}else{R({msg:"已成功移除视频"});n=e.listData.filter(function(t,e){return t.aid!=i});e.listData=n}}).fail(function(t){})},onDelViewed:function(t){var i=this;t&&(ei({text:"即将删除所有已观看视频，此操作不可恢复。确定是否删除？",buttonMode:2,onSubmit:function(){i.delVideo(!0),i.rec("wllistpage_clearplayed_comfirm")}}),i.rec("wllistpage_clearplayed_click"))},onDelVideo:function(t){this.delVideo(!1,t),this.rec("wllistpage_video_delete")},onDelAll:function(){var t=this;0!==t.listData.length&&(ei({title:"清空确认",text:"确定要清空你的稍后再看列表吗？",buttonMode:2,onSubmit:function(){F({url:"//api.bilibili.com/x/v2/history/toview/clear",type:"POST",data:{jsonp:"jsonp",csrf:y.get("bili_jct")},xhrFields:{withCredentials:!0}},!0).done(function(i){i&&0===i.code&&(t.listData=[])}).fail(function(t){})}}),t.rec("watchlater_deleteall"))},corner:function(t){if(0===t.state||1===t.state||-6===t.state){if(!t.pages)return"";var i=t.pages&&t.pages.length;return i<=1?'<span class="corner">'+U(t.pages[0].duration)+"</span>":'<span class="branch">'+(i>=1e3?"999":i)+"P</span>"}return'<span class="corner">已失效</span>'},part:function(t){if(t.cid){var i=t.pages.filter(function(i,e){return i.cid===t.cid});return"/p"+(i[0]&&i[0].page||1)}return"/p1"},videoLink:function(t){return"/watchlater/#/".concat(this.$isbv?t.bvid:"av"+t.aid)},onPlayAll:function(){this.listData.length>0&&this.rec("wllistpage_playall_click")}}}),pi=(e(117),Object(v.a)(mi,function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"watch-later-list bili-wrapper"},[a("header",[a("span",{staticClass:"t"},[t._v("稍后再看"),a("em",[t._v("（"+t._s(t.listData.length)+"/100）")])]),a("div",{staticClass:"r-con"},[a("a",{class:t.listData.length>0?"s-btn":"d-btn",attrs:{href:t.listData.length>0?"#/":"javascript:;"},on:{click:t.onPlayAll}},[t._v("全部播放")]),a("a",{class:t.listData.length>0?"s-btn":"d-btn",on:{click:function(i){return t.onDelAll()}}},[t._v("一键清空")]),a("a",{ref:"btnRemove",class:t.looked?"s-btn":"d-btn",on:{click:function(i){return t.onDelViewed(t.looked)}}},[t._v("移除已观看视频")])])]),t.isLogin?a("loading",{attrs:{data:t.listData,state:t.state,reload:"reload-watchlater-data"}}):t._e(),t.listData.length>0?a("div",{staticClass:"list-box"},[a("transition-group",{attrs:{name:"itemlist"}},t._l(t.listData,function(i,e){return a("div",{directives:[{name:"rec",rawName:"v-rec",value:"wllistpage_video_click",expression:"'wllistpage_video_click'"}],key:i.aid,staticClass:"av-item clearfix"},[a("span",{staticClass:"key"},[t._v(t._s(e+1))]),a("a",{staticClass:"av-pic",attrs:{href:-1!==[0,1,-6].indexOf(i.state)?t.videoLink(i)+t.part(i):"javascript:;"}},[a("bili-img",{attrs:{src:i.pic,width:160,height:100}}),a("div",{domProps:{innerHTML:t._s(t.corner(i))}})],1),a("div",{staticClass:"av-about"},[0===i.state||1===i.state||-6===i.state?a("a",{staticClass:"t",attrs:{href:t.videoLink(i)+t.part(i)}},[t._v(t._s(i.title))]):a("a",{staticClass:"t t-d"},[t._v(t._s(i.title))]),a("div",{staticClass:"info clearfix"},[a("a",{staticClass:"user",attrs:{href:"//space.bilibili.com/"+i.owner.mid}},[a("div",{staticClass:"face"},[a("bili-img",{attrs:{src:i.owner.face,width:20,height:20}})],1),a("span",[t._v(t._s(i.owner.name))])]),a("div",{staticClass:"state"},[i.progress>=30||-1===i.progress?a("span",{staticClass:"looked"},[t._v("已观看")]):t._e(),a("i",{staticClass:"btn-del icon",on:{click:function(e){return t.onDelVideo(i.aid)}}})])])])])}),0)],1):t._e(),0===t.listData.length&&t.isLogin&&"loaded"===t.state?a("div",{staticClass:"abnormal-item"},[a("img",{staticClass:"pic",attrs:{src:e(36)}}),t._m(0)]):t._e(),t.isLogin?t._e():a("div",{staticClass:"abnormal-item"},[a("p",{staticClass:"tt"},[t._v("请先登录，"+t._s(t.cd)+"秒后自动跳转")]),t._m(1)])],1)},[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"txt"},[i("p",[this._v("稍后再看列表还是空的哦，你可以通过以上方式添加~")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"link"},[i("p",[i("a",{attrs:{href:"https://passport.bilibili.com/login"}},[this._v("如果你的浏览器没有反应，请点击这里...")])])])}],!1,null,null,null).exports);a.a.use(f.a);var fi=function(){return new f.a({routes:[{path:"/",component:di},{path:"/list",component:pi},{path:"/:aid",component:di},{path:"/:aid/:cid",component:di}]})};function hi(t){"string"==typeof t?A(t):A(t.name,t.ops)}a.a.filter("formatDuration",function(t){return U(t)}),a.a.filter("formatDate",function(t){return function(t){if(t){var i=new Date(t);return i.getFullYear()+"-"+M(i.getMonth()+1)+"-"+M(i.getDate())}}(t)}),a.a.filter("formatDateTime",function(t){return function(t){if(t){var i=new Date(t);return i.getFullYear()+"-"+M(i.getMonth()+1)+"-"+M(i.getDate())+" "+M(i.getHours())+":"+M(i.getMinutes())+":"+M(i.getSeconds())}}(t)}),a.a.filter("formatNum",function(t){return T(t)}),a.a.filter("trimHttp",function(t){return I(t)}),a.a.directive("mouse-movieclip",{bind:function(t,i){var e=i.value,a=0,n=0,s=!1,o=e.target?$(t).find(e.target):$(t),l=e.direction?e.direction:"x",r=e.speed?e.speed:80;t.addEventListener("mouseenter",function(){s=!0,n=0,clearInterval(t.timer);var i={};t.timer=setInterval(function(){a=-n*e.step,"x"===l&&(i={"background-position-x":a}),"y"===l&&(i={"background-position-y":a}),$(o).css(i),s?++n>e.max-1&&(n=e.point):--n<0&&clearInterval(t.timer)},r)}),t.addEventListener("mouseleave",function(){s=!1})}}),a.a.directive("longClick",{bind:function(t,i){t.addEventListener("mousedown",function(){t.isPressing=!0;var e=i.value;t.timer=setTimeout(function(){t.isPressing&&e()},i.arg)})}}),a.a.directive("longClickLeave",{bind:function(t,i){t.addEventListener("mouseup",function(){t.isPressing&&(clearTimeout(t.timer),t.isPressing=!1,i.value())}),t.addEventListener("mouseleave",function(){t.isPressing&&(clearTimeout(t.timer),t.isPressing=!1,i.value())})}}),a.a.directive("report",{bind:function(t,i){t.addEventListener(i.arg,function(){var t=i.value;t instanceof Array?t.forEach(function(t){return hi(t)}):hi(t),i.modifiers.self&&window.reportObserver.forceCommit()})}}),a.a.directive("focus",{inserted:function(t){t.focus()}});var vi=["scroll","resize","load"];function wi(t,i){var e,a;for(e=0,a=t.length;e<a;++e)if(t[e].el===i)return e;return-1}var bi={install:function(t,i){var e=[],a=[],n=i||{preload:0};function s(t){t.loading||t.loaded||!C(t.el,n.preload)||function(t){if(t.loading||t.loaded)return;t.loading=!0;var i=new Image;i.onload=function(){t.el.src=t.src,t.loading=!1,t.loaded=!0},i.onerror=function(){t.loading=!1,t.loaded=!0,t.el.src=t.defaultImg},i.src=t.src}(t)}function o(t){!t.loaded&&C(t.el,n.preload)&&(t.handler.call(),t.loaded=!0)}function l(i,n){var l=g()(i);"string"===l?function(i,a){var n=wi(e,a),o=a.getAttribute("src"),l={el:a,src:i,loading:!1,loaded:!1,defaultImg:o};-1!==n?e[n]=l:e.push(l),t.nextTick(function(){s(l)})}(i,n):"object"===l&&function(i,e){var n=wi(a,e),s={el:e,id:i.id,loaded:!1,handler:i.handler||function(){}};-1!==n?a[n].id!==i.id&&(a[n]=s,t.nextTick(function(){o(s)})):(a.push(s),t.nextTick(function(){o(s)}))}(i,n)}t.directive("lazy",{bind:function(t,i){l(i.value,t)},update:function(t,i){l(i.value,t)},componentUpdated:function(t,i){},unbind:function(t,i){var e=i.value;if("object"===g()(e)){var n=wi(a,t);-1!==n&&a.splice(n,1)}}});for(var r=_(function(){!function(){var t,i;for(t=0,i=e.length;t<i;++t)s(e[t])}(),function(){var t,i;for(t=0,i=a.length;t<i;++t)o(a[t])}()},200,100),c=0;c<vi.length;++c)window.addEventListener(vi[c],r);lt.$on("updateFloor",function(){r()}),lt.$on("appMounted",function(){r()})}},gi=["scroll","resize","load"];function yi(t,i){window.BiliCm&&window.BiliCm.Base&&"function"==typeof window.BiliCm.Base.sendShowData?window.BiliCm.Base.sendShowData(t,i):D("ad","sendShowData not found")}function Ci(t,i){window.BiliCm&&window.BiliCm.Base&&"function"==typeof window.BiliCm.Base.sendStrictShowData?window.BiliCm.Base.sendStrictShowData(t,i):D("ad","sendStrictShowData not found")}function _i(t,i){var e,a;t.setAttribute("href",I((e=i.data,a=i.id,(window.BiliCm&&window.BiliCm.Base&&"function"==typeof window.BiliCm.Base.getSyncUrl?window.BiliCm.Base.getSyncUrl(e,a,null,window.__BILI_CONFIG__&&window.__BILI_CONFIG__.show_bv):(D("ad","getSyncUrl not found"),""))||""))),t.setAttribute("data-target-url",i.data.url)}var Ti={install:function(t,i){var e={},a=[2624];for(var n in si)si[n].locid&&a.push(si[n].locid);t.directive("ad",{bind:function(t,i){var n=i.value;if(n.data&&n.id){n.data.is_ad_loc?_i(t,n):t.setAttribute("href",I(n.data.url)),t.addEventListener("click",function(){!function(t,i){window.BiliCm&&window.BiliCm.Base&&"function"==typeof window.BiliCm.Base.sendClickData?window.BiliCm.Base.sendClickData(t,i):D("ad","sendClickData not found")}(n.data,n.id)});var s=n.data.id||n.data.src_id;-1===a.indexOf(n.id)&&(e[s]={el:t,data:n.data,id:n.id,nowShow:!1})}},update:function(t,i){var e=i.value;e.data&&e.data.is_ad_loc&&_i(t,e)},componentUpdated:function(t,i){},unbind:function(t,i){}});for(var s=_(function(){for(var t=Object.keys(e),i=function(i,a){var n=t[i],s=e[n].el&&e[n].el.offsetHeight;C(e[n].el,s/2*-1)&&(e[n].nowShow||(e[n].nowShow=!0,yi(e[n].data,e[n].id)),e[n].timer&&clearTimeout(e[n].timer),e[n].timer=setTimeout(function(){clearTimeout(e[n].timer),C(e[n].el,s/2*-1)&&(Ci(e[n].data,e[n].id),delete e[n])},1e3))},a=0,n=t.length;a<n;++a)i(a)},200,100),o=0;o<gi.length;++o)window.addEventListener(gi[o],s);lt.$on("adReport",s);var l={};lt.$on("slideShow",function(t){if(t.data&&t.id&&t.el){var i=$(t.el).height()/2*-1;C(t.el,i)&&yi(t.data,t.id),l.index=t.index,l.timer=setTimeout(function(){clearTimeout(l.timer),C(t.el,i)&&t.index===l.index&&Ci(t.data,t.id)},1e3)}})}},Mi={install:function(t,i){var e=i&&i.min||1400,a="normal",n=_(function(){var t;(t=window.innerWidth>=e?"wide":"normal")!==a&&(a=t,lt.$emit("screenModeChange",t))},200,50);window.addEventListener("resize",n),window.addEventListener("load",n),t.getScreenMode=function(){return a}}};a.a.use(s.a),a.a.use(bi,{preload:100}),a.a.use(Ti),a.a.use(Mi),a.a.prototype.rec=function(t){window.spmReportData&&(window.spmReportData[t]=t)},a.a.directive("rec",{bind:function(t,i){i.value;t.addEventListener("click",function(){window.spmReportData[name]=name})}});e(51),e(52);a.a.mixin({beforeRouteUpdate:function(t,i,e){var a=this.$options.asyncData;a?a({store:this.$store,route:t}).then(e).catch(e):e()}});var Ui,Ii,ki,xi=(Ui=p(),Ii=fi(),{app:new a.a({store:Ui,router:Ii,render:function(t){return t(w)}}),router:Ii,store:Ui}),ji=xi.app,Di=xi.router,Ai=xi.store;if(ki=window.__BILI_CONFIG__&&window.__BILI_CONFIG__.show_bv,a.a.prototype.$isbv=ki,a.a.prototype.$transformId=function(t,i){return ki&&i||t},a.a.prototype.$transformLink=function(t,i){return ki?"//www.bilibili.com/video/".concat(i||"av"+t):"//www.bilibili.com/video/av".concat(t)},window.__INITIAL_STATE__)Ai.replaceState(window.__INITIAL_STATE__);else{var $i=Di.getMatchedComponents();if(!$i){var Ji=new Error("404 Not Found");throw Ji.status=404,Ji}Promise.all($i.map(function(t){return t.asyncData&&t.asyncData(Ai)})).then(function(){ji.$mount("#watchlater-app")}).catch(function(t){console.error(t)})}Di.onReady(function(){window&&window.document.getElementById("app")&&ji.$mount("#app")})}]);